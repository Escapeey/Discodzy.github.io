<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Escapeey`Blog</title>
  
  <subtitle>岂能尽如人意，但求无愧我心。</subtitle>
  <link href="https://escapeey.github.io/atom.xml" rel="self"/>
  
  <link href="https://escapeey.github.io/"/>
  <updated>2023-12-25T14:22:46.457Z</updated>
  <id>https://escapeey.github.io/</id>
  
  <author>
    <name>Escapeey</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Unity-LineRenderer</title>
    <link href="https://escapeey.github.io/post/5798c815.html"/>
    <id>https://escapeey.github.io/post/5798c815.html</id>
    <published>2023-12-25T21:48:47.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LineRenderer是什么">LineRenderer是什么</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">使用它我们可以在场景中绘制线段,一般可以用于</span><br><span class="line">- 绘制攻击范围</span><br><span class="line">- 武器红外线</span><br><span class="line">- 辅助功能</span><br><span class="line">- 其它画线功能</span><br><span class="line"></span><br><span class="line">## LineRender参数相关</span><br><span class="line">- ```Corner Vertices```(角顶点，圆角)</span><br><span class="line">此属性指示在一条线中绘制角时使用了多少个额外的顶点</span><br><span class="line">增加此值，使**线角看起来更圆**</span><br><span class="line">- ```End Cap Vertices```(终端顶点，圆角)</span><br><span class="line">终点圆角</span><br><span class="line">- 其余重点参数在代码部分介绍</span><br><span class="line">## LineRender代码相关</span><br><span class="line">- 动态添加一个线段</span><br><span class="line">```C#</span><br><span class="line">GameObject line = new GameObject();</span><br><span class="line">LineRenderer lineR = line.AddComponent&lt;LineRenderer&gt;;</span><br></pre></td></tr></table></figure><ul><li>首尾相连</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineR.loop = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><ul><li>开始结束宽</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lineR.startWidth = <span class="number">0.02f</span>;</span><br><span class="line">lineR.endWidth = <span class="number">0.02f</span>;</span><br></pre></td></tr></table></figure><ul><li>开始结束颜色</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lineR.startColor = Color.white;</span><br><span class="line">lineR.endColor = Color.red;</span><br></pre></td></tr></table></figure><ul><li>设置材质</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m = Resources.Load&lt;Material&gt;(<span class="string">&quot;M&quot;</span>);</span><br><span class="line">lineR.material = m;</span><br></pre></td></tr></table></figure><ul><li>设置点<br>一定注意设置点要<strong>先设置点的个数</strong><br>接着就设置 对应每个点的位置<br>当设置的位置数少于先前设置点的个数时，剩余的点坐标都默认为原点</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lineR.positionCount = <span class="number">4</span>;</span><br><span class="line">lineR.SetPositions(<span class="keyword">new</span> Vector3[] &#123; <span class="keyword">new</span> Vector3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>),</span><br><span class="line">                                   <span class="keyword">new</span> Vector3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">5</span>),</span><br><span class="line">                                   <span class="keyword">new</span> Vector3(<span class="number">5</span>,<span class="number">0</span>,<span class="number">5</span>)&#125;);</span><br><span class="line">lineR.SetPosition(<span class="number">3</span>, <span class="keyword">new</span> Vector3(<span class="number">5</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br></pre></td></tr></table></figure><ul><li>是否使用世界坐标系<br>决定了 是否随对象移动而移动</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineR.useWorldSpace = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><ul><li>让线段受光影响 会接受光数据 进行着色器计算</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineR.generateLightingData = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><h2 id="例子">例子</h2><h3 id="练习一">练习一</h3><p><strong>请写一个方法，传入一个中心点，传入一个半径，用LineRender画一个圆出来</strong></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DrawLineRenderer</span>(<span class="params">Vector3 centerPos, <span class="built_in">float</span> r, <span class="built_in">int</span> pointNum</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//动态创建 画线对象</span></span><br><span class="line">    GameObject obj = <span class="keyword">new</span> GameObject();</span><br><span class="line">    obj.name = <span class="string">&quot;R&quot;</span>;</span><br><span class="line">    LineRenderer line = obj.AddComponent&lt;LineRenderer&gt;();</span><br><span class="line">    <span class="comment">//设置有多少个点</span></span><br><span class="line">    line.positionCount = pointNum;</span><br><span class="line">    <span class="comment">//让其首尾相连</span></span><br><span class="line">    line.loop = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//得到每个点之间 间隔的度数</span></span><br><span class="line">    <span class="built_in">float</span> angle = <span class="number">360f</span> / pointNum;</span><br><span class="line">    <span class="comment">//准备得到每一个点</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; pointNum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//知识点</span></span><br><span class="line">        <span class="comment">//1.点加向量 相当于平移点</span></span><br><span class="line">        <span class="comment">//2.四元数 * 向量 相当于在 旋转向量</span></span><br><span class="line">        line.SetPosition(i, centerPos + Quaternion.AngleAxis(angle * i, Vector3.up) * Vector3.forward * r);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="练习二">练习二</h3><p><strong>在Game窗口长按鼠标用LineRenderer画出鼠标移动的轨迹</strong></p><ul><li>重点是 如何得到鼠标转世界坐标的 对应点</li><li>知识点<ul><li>得到鼠标位置 <code>Input.mousePosition</code></li><li>把鼠标 转世界坐标 <code>Camera.main.ScreenToWorldPoint(Input.mousePosition);</code></li></ul></li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> LineRenderer line2;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Start</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    line2 = <span class="keyword">this</span>.gameObject.AddComponent&lt;LineRenderer&gt;();</span><br><span class="line">    line2.loop = <span class="literal">false</span>;</span><br><span class="line">    line2.startWidth = <span class="number">0.5f</span>;</span><br><span class="line">    line2.endWidth = <span class="number">0.5f</span>;</span><br><span class="line">    line2.positionCount = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> Vector3 nowPos;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>( Input.GetMouseButton(<span class="number">0</span>) )</span><br><span class="line">    &#123;</span><br><span class="line">        line2.positionCount += <span class="number">1</span>;</span><br><span class="line">        nowPos = Input.mousePosition;</span><br><span class="line">        <span class="comment">//设置z轴为横截面深度</span></span><br><span class="line">        nowPos.z = <span class="number">10</span>;</span><br><span class="line">        line2.SetPosition(line2.positionCount - <span class="number">1</span>, Camera.main.ScreenToWorldPoint(nowPos));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;LineRenderer是什么&quot;&gt;LineRenderer是什么&lt;/h2&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/s</summary>
      
    
    
    
    <category term="Unity" scheme="https://escapeey.github.io/categories/Unity/"/>
    
    
    <category term="C#" scheme="https://escapeey.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Unity-场景异步切换</title>
    <link href="https://escapeey.github.io/post/33841c46.html"/>
    <id>https://escapeey.github.io/post/33841c46.html</id>
    <published>2023-12-25T15:58:08.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h2 id="场景同步切换">场景同步切换</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SceneManger.LoadScene(<span class="string">&quot;TestScene&quot;</span>);</span><br></pre></td></tr></table></figure><p>场景同步切换的<strong>缺点</strong>：</p><ul><li>因为先删除当前场景中所有对象，且去加载新场景的相关信息，会很耗时，造成卡顿</li></ul><h2 id="场景异步切换">场景异步切换</h2><p>和<strong>资源异步加载</strong>几乎一致，有两种方法</p><h3 id="通过事件回调函数-异步加载">通过事件回调函数 异步加载</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">AsyncOperation ao = SceneManger.LoadSceneAsync(<span class="string">&quot;TestScene&quot;</span>);</span><br><span class="line">ao.completed += (a) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;加载结束&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="通过协程-异步加载">通过协程 异步加载</h3><ul><li>需要注意的是 加载场景会把当前场景上<strong>没有特别处理</strong>的对象<strong>都删除了</strong>，所以<strong>协程中的部分逻辑执行不了</strong></li><li>解决思路：<br>让处理场景加载的<strong>脚本依附的对象</strong> 过场景时<strong>不被移除</strong></li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DontDestroyOnLoad(<span class="keyword">this</span>.gameObject);</span><br><span class="line">StartCoroutine(LoadScene(<span class="string">&quot;TestScene&quot;</span>));</span><br><span class="line"><span class="function">IEnumerator <span class="title">LoadScene</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//第一步</span></span><br><span class="line">    <span class="comment">//异步加载场景</span></span><br><span class="line">    AsyncOperation ao = SceneManager.LoadSceneAsync(name);</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> ao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="使用协程的好处">使用协程的好处</h4><ul><li>可以在异步<strong>加载场景的同时</strong>做一些别的逻辑，比如<strong>更新进度条</strong></li></ul><h5 id="方法一">方法一</h5><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//利用 场景异步加载的进度去更新 不是特别准确</span></span><br><span class="line"><span class="function">IEnumerator <span class="title">LoadScene</span>(<span class="params"><span class="built_in">string</span> name</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//第一步</span></span><br><span class="line">    <span class="comment">//异步加载场景</span></span><br><span class="line">    AsyncOperation ao = SceneManager.LoadSceneAsync(name);</span><br><span class="line">    <span class="keyword">while</span>(!ao.isDone)</span><br><span class="line">    &#123;</span><br><span class="line">        print(ao.progress);</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//离开循环后 就会认为场景加载结束</span></span><br><span class="line"><span class="comment">//可以把进度条顶满 然后 隐藏进度条</span></span><br></pre></td></tr></table></figure><h5 id="方法二">方法二</h5><p>根据游戏规则<strong>自定义</strong>进度条变化的条件,例如：</p><ul><li>场景加载结束 更新20%进度</li><li>动态加载怪物 再更新20%进度</li><li>动态加载场景模型 认为加载结束 进度条顶满</li><li>隐藏进度条</li></ul><h2 id="总结">总结</h2><h3 id="事件回调函数">事件回调函数</h3><ul><li>优点：写法简单，逻辑清晰</li><li>缺点：只能<strong>加载完场景</strong>做一些事情 不能再加载过程中处理逻辑</li></ul><h3 id="协程异步加载">协程异步加载</h3><ul><li>优点：可以在<strong>加载过程中</strong>处理逻辑，比如进度条更新等</li><li>缺点：写法较为麻烦，要通过协程</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;场景同步切换&quot;&gt;场景同步切换&lt;/h2&gt;
&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td cl</summary>
      
    
    
    
    <category term="Unity" scheme="https://escapeey.github.io/categories/Unity/"/>
    
    
    <category term="C#" scheme="https://escapeey.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>数据库系统5-数据库设计</title>
    <link href="https://escapeey.github.io/post/4c0f8279.html"/>
    <id>https://escapeey.github.io/post/4c0f8279.html</id>
    <published>2023-11-25T10:42:14.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h1>1 数据库设计概论</h1><ul><li>数据库设计是指设计<strong>数据库应用程序</strong></li></ul><h1>2 数据库设计的基本步骤</h1><h2 id="2-1-需求分析">2.1 需求分析</h2><ul><li><strong>收集</strong>用户业务活动及活动数据，由系统分析人员按照分析方法加以<strong>总结提炼</strong>，<strong>描述</strong>用户使用中<strong>的业务信息</strong></li></ul><h2 id="2-2-概念结构设计">2.2 概念结构设计</h2><ul><li>将需求分析结果<strong>抽象为概念模型</strong>的过程，具体内容为<strong>建立概念模型(E-R图)</strong></li></ul><h2 id="2-3-逻辑结构设计">2.3 逻辑结构设计</h2><ul><li><strong>选择</strong>使用的数据模型类型</li><li>将E-R图<strong>转换</strong>为数据模型</li><li>对数据模型进行<strong>优化</strong></li><li>设计子模式</li></ul><h2 id="2-4-数据库物理设计">2.4 数据库物理设计</h2><ul><li><strong>确定</strong>数据库的<strong>物理结构</strong></li><li>对物理结构进行<strong>评价</strong>，评价的重点是<strong>空间和时间效率</strong></li><li>若评价结果满足设计要求则进入物理实施阶段</li><li>关系数据库物理设计的内容:<ul><li>为关系模式选择<strong>存取方法</strong>(建立存取路径)</li><li>设计<strong>关系</strong>、<strong>索引</strong>等数据库文件的<strong>物理存储结构</strong></li></ul></li></ul><h2 id="2-5-数据库实施">2.5 数据库实施</h2><ul><li>用DDL<strong>定义</strong>数据库结构</li><li><strong>组织</strong>数据入库</li><li><strong>编制与调试</strong>应用程序</li><li>数据库<strong>试运行</strong></li></ul><h2 id="2-6-数据库运行和维护">2.6 数据库运行和维护</h2><p>维护工作主要由DBA完成</p><ul><li>数据库的<strong>转储和恢复</strong></li><li>数据库的<strong>安全性、完整性控制</strong></li><li>数据库<strong>性能</strong>的<strong>监督、分析和改进</strong></li><li>数据库的<strong>重组织</strong>和<strong>重构造</strong></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1 数据库设计概论&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;数据库设计是指设计&lt;strong&gt;数据库应用程序&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;2 数据库设计的基本步骤&lt;/h1&gt;
&lt;h2 id=&quot;2-1-需求分析&quot;&gt;2.1 需求分析&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;str</summary>
      
    
    
    
    <category term="数据库系统" scheme="https://escapeey.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="知识点" scheme="https://escapeey.github.io/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
  </entry>
  
  <entry>
    <title>数据库系统6-数据库恢复技术</title>
    <link href="https://escapeey.github.io/post/487a1363.html"/>
    <id>https://escapeey.github.io/post/487a1363.html</id>
    <published>2023-11-24T14:31:13.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h1>1 事务的基本概念</h1><h2 id="1-1-事务概念">1.1 事务概念</h2><ul><li><strong>事务</strong>：是用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的<strong>工作单位</strong></li><li>一个事务可以是一条SQL语句、一组SQL语句或整个程序</li><li>一个应用程序通常包含多个事务</li><li>事务是<strong>恢复和并发控制的基本单位</strong></li></ul><h2 id="1-2-如何定义事务">1.2 如何定义事务</h2><ul><li><strong>COMMIT</strong>语句表示：事务<strong>正常结束</strong>，<strong>提交事务的所有操作</strong>(读+更新)，事务中所有对数据库的更新永久生效</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BEGIN TRANSACTION</span><br><span class="line">    SQL语句1</span><br><span class="line">    SQL语句2</span><br><span class="line">    …………</span><br><span class="line">COMMIT</span><br></pre></td></tr></table></figure><ul><li><strong>ROLLBACK</strong>语句表示：事务<strong>异常终止</strong>，<strong>回滚事务的所有更新操作</strong>，使事务<strong>回滚到开始时</strong>的状态</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BEGIN TRANSACTION</span><br><span class="line">    SQL语句1</span><br><span class="line">    SQL语句2</span><br><span class="line">    …………</span><br><span class="line">ROLLBACK</span><br></pre></td></tr></table></figure><h2 id="1-3-事务的特性-ACID">1.3 事务的特性 ACID</h2><ul><li><strong>原子性</strong>(Atomicity)<ul><li>事务中包含的诸操作要么都做，要么都不做</li></ul></li><li><strong>一致性</strong>(Consistency)<ul><li>事务执行使数据库从一个一致性状态变到另一个一致性状态</li></ul></li><li><strong>隔离性</strong>(Isolation)<ul><li>一个事务的执行不能被其他事务干扰，而影响它对数据的正常使用和修改</li></ul></li><li><strong>持续性</strong>(Durability)<ul><li>一个事务一旦提交，它对数据库中数据的改变就应该是永久性的，接下来的其他操作或故障不应该对其执行结果由任何影响</li></ul></li></ul><h1>2 故障的种类</h1><h2 id="2-1-事务故障">2.1 事务故障</h2><h3 id="定义">定义</h3><ul><li>某个事务由于某种原因未运行至终止点就夭折了</li></ul><h3 id="恢复">恢复</h3><ul><li>对于<strong>可预见</strong>的错误，由<strong>事务程序来处理</strong>(如越界判断等)</li><li>对于<strong>不可预见</strong>的错误，由DBMS<strong>强行回滚</strong>该事务</li></ul><h2 id="2-2-系统故障">2.2 系统故障</h2><h3 id="定义-2">定义</h3><ul><li>整个系统的正常运行突然被破坏</li><li>所有正在运行的事务都非正常终止</li></ul><h3 id="恢复-2">恢复</h3><ul><li>清除尚未完成的事务对数据库的所有修改</li><li>将缓冲区中已完成的事务提交的结果写入数据库</li></ul><h2 id="2-3-介质故障">2.3 介质故障</h2><h3 id="定义-3">定义</h3><ul><li>存储数据库的设备(如硬盘)发生故障导致存储在其上的数据部分丢失或全部丢失</li></ul><h3 id="恢复-3">恢复</h3><ul><li>装入数据库发生介质故障前某个时刻的数据副本</li><li>重做自此时开始的所有成功事务，将这些事务已提交的结果重新记入数据库</li></ul><h1>3 恢复的实现技术</h1><h2 id="3-1-数据恢复的基本原理">3.1 数据恢复的基本原理</h2><ul><li>数据恢复的基本原理是<strong>冗余</strong>，即利用存储在系统其他地方的<strong>冗余数据</strong>来<strong>重建</strong>数据库中已被破坏或不正确的那部分数据<br>关键技术：</li></ul><ol><li>如何建立冗余数据<ul><li>数据转储(backup)</li><li>登录日志文件(logging)</li></ul></li><li>如何利用这些冗余数据实施数据库恢复</li></ol><h2 id="3-2-数据转储">3.2 数据转储</h2><h3 id="定义-4">定义</h3><ul><li>转储是指DBA将整个数据库复制到磁带或另一个磁盘上保存起来的过程</li><li>这些备用的数据文件称为后备副本或后援副本</li></ul><h3 id="分类">分类</h3><ol><li>静态转储<ul><li>转储必须等用户事务结束</li><li>新的事务必须等转储结束</li></ul></li><li>动态转储<ul><li>转储操作与用户事务并发进行</li><li>转储期间允许对数据库进行存储或修改</li></ul></li><li>海量转储<ul><li>每次转储全部数据库</li></ul></li><li>增量转储<ul><li>只转储上次转储后更新过的数据</li></ul></li></ol><h3 id="转储策略">转储策略</h3><ul><li>应定期进行海量转储</li><li>DBA应该更具使用情况确定适当的转储周期和转储方式</li></ul><h2 id="3-3-登录日志文件">3.3 登录日志文件</h2><h3 id="定义-5">定义</h3><ul><li>日志文件(log)是用来记录事务对数据库的更新操作的文件</li></ul><h3 id="格式和内容">格式和内容</h3><h4 id="以记录为单位的日志文件">以记录为单位的日志文件</h4><ul><li>格式<ul><li>各个事务开始标记 BEGIN TRANSACTION</li><li>各个事务结束标记 COMMIT 或 ROLLBACK</li></ul></li><li>内容<ul><li>各个事物的所有更新操作</li><li>各个事物的内部更新操作</li></ul></li></ul><h4 id="以数据块为单位的日志文件">以数据块为单位的日志文件</h4><ul><li>事务标识</li><li>操作类型(插入、删除或修改)</li><li>操作对象(记录ID、Block NO.)</li><li>更新前数据的旧值</li><li>更新后数据的新值</li></ul><h3 id="日志文件的用途">日志文件的用途</h3><ul><li>进行故障恢复</li></ul><h1>恢复策略</h1><h1>具有检查点的恢复技术</h1><h1>数据库镜像</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1 事务的基本概念&lt;/h1&gt;
&lt;h2 id=&quot;1-1-事务概念&quot;&gt;1.1 事务概念&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;事务&lt;/strong&gt;：是用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的&lt;strong&gt;工作单位&lt;/strong&gt;</summary>
      
    
    
    
    <category term="数据库系统" scheme="https://escapeey.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="知识点" scheme="https://escapeey.github.io/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
  </entry>
  
  <entry>
    <title>数据库系统4-关系数据库理论</title>
    <link href="https://escapeey.github.io/post/1203c0f8.html"/>
    <id>https://escapeey.github.io/post/1203c0f8.html</id>
    <published>2023-11-20T11:45:55.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h1>第五章 关系数据库理论</h1><h2 id="关系模式设计引论">关系模式设计引论</h2><h2 id="函数依赖与规范化">函数依赖与规范化</h2><h2 id="数据依赖的公理系统">数据依赖的公理系统</h2><h2 id="实例分析">实例分析</h2><h1>第八章 并发控制</h1><h2 id="并发控制概述">并发控制概述</h2><h2 id="封锁">封锁</h2><h2 id="封锁协议">封锁协议</h2><h2 id="活锁和死锁">活锁和死锁</h2><h2 id="并发调度的可串行性">并发调度的可串行性</h2><h2 id="两段锁协议">两段锁协议</h2><h1>第十章 数据库完整性</h1><h2 id="完整性概述">完整性概述</h2><h2 id="完整性约束条件">完整性约束条件</h2><h2 id="触发器技术">触发器技术</h2><h2 id="实例分析-2">实例分析</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;第五章 关系数据库理论&lt;/h1&gt;
&lt;h2 id=&quot;关系模式设计引论&quot;&gt;关系模式设计引论&lt;/h2&gt;
&lt;h2 id=&quot;函数依赖与规范化&quot;&gt;函数依赖与规范化&lt;/h2&gt;
&lt;h2 id=&quot;数据依赖的公理系统&quot;&gt;数据依赖的公理系统&lt;/h2&gt;
&lt;h2 id=&quot;实例分析&quot;&gt;实例分析&lt;/h</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>数据库系统3-SQL语言</title>
    <link href="https://escapeey.github.io/post/d733c799.html"/>
    <id>https://escapeey.github.io/post/d733c799.html</id>
    <published>2023-11-19T17:00:46.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<p><a url="https://www.cnblogs.com/rqy0526/p/11015943.html#:~:text=%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E5%A4%A7%E5%85%A8%201%201.%20C%20%28Create%29%3A%E5%88%9B%E5%BB%BA%201.%20%E8%AF%AD%E6%B3%95%EF%BC%9A%20create,%E5%88%97%E5%90%8D%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%3B%204.%20...%204%204.%20D%20%28Delete%29%3A%E5%88%A0%E9%99%A4">数据库操作的基本语法大全</a></p><h1>1 SQL概述</h1><p>SQL(Structured Query Language):结构化查询语言，是关系数据库的标准语言</p><h2 id="1-1-SQL的特点">1.1 SQL的特点</h2><ul><li>综合统一<ul><li>集DDL、DML、DCL于一体</li></ul></li><li>高度非过程化</li><li>面向集合的操作方式</li><li>以同一种语法结构提供两种使用方式<ul><li>可交互式和嵌入式使用</li></ul></li><li>以简捷的自然语言作为操作语言</li></ul><h2 id="1-2-SQL语言所使用的动词">1.2 SQL语言所使用的动词</h2><table><thead><tr><th style="text-align:center">SQL功能</th><th style="text-align:center">动词</th></tr></thead><tbody><tr><td style="text-align:center">数据查询</td><td style="text-align:center">SELECT</td></tr><tr><td style="text-align:center">数据定义</td><td style="text-align:center">CREATE、DROP、ALTER</td></tr><tr><td style="text-align:center">数据操纵</td><td style="text-align:center">INSERT、UPDATE、DELETE</td></tr><tr><td style="text-align:center">数据控制</td><td style="text-align:center">GRANT、REVOKE</td></tr></tbody></table><h2 id="1-3-SQL支持数据库三级模式体系结构">1.3 SQL支持数据库三级模式体系结构</h2><img src="..\..\img\DB\SQL-支持数据库三级模式体系结构.png" width="70%" height="70%" align="middle"><h1>2 数据定义</h1><ul><li>SQL提供了专门的语言用来定义数据库、表、索引等数据库对象，这些语言被称作<strong>数据库定义语言DDL</strong></li><li>SQL的数据库定义语句<br><img src="..\..\img\DB\SQL-数据库定义语句.png" width="70%" height="70%" align="middle"></li></ul><h2 id="2-1-创建基本表">2.1 创建基本表</h2><img src="..\..\img\DB\SQL-创建基本表.png" width="70%" height="70%" align="middle"><h3 id="2-1-1-常用完整性约束">2.1.1 常用完整性约束</h3><ul><li>主码约束：<strong>PRIMARY KEY</strong></li><li>唯一性约束：<strong>UNIQUE</strong></li><li>非空值约束：<strong>NOT NULL</strong></li><li>参照完整性约束：<ul><li><strong>FOREIGN KEY&lt;列名&gt;REFERENCES&lt;表名&gt;(&lt;列名&gt;)</strong></li></ul></li><li>用户定义完整性约束：<ul><li><strong>Check(&lt;约束条件表达式&gt;)</strong></li></ul></li><li>缺省值约束：Default<ul><li><strong>Default&lt;缺省值&gt;</strong></li></ul></li></ul><h3 id="2-1-2-SQL中数据类型">2.1.2 SQL中数据类型</h3><img src="..\..\img\DB\SQL-数据类型.png" width="70%" height="70%" align="middle"><h2 id="2-2-索引">2.2 索引</h2><h1>查询</h1><h1>实例分析</h1><h1>数据更新</h1><h1>视图</h1><h1>嵌入式SQL</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a url=&quot;https://www.cnblogs.com/rqy0526/p/11015943.html#:~:text=%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E7%9A%84%E5%9F%BA%E6%9C%AC%</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>数据库系统2-关系数据库</title>
    <link href="https://escapeey.github.io/post/63fbbbb3.html"/>
    <id>https://escapeey.github.io/post/63fbbbb3.html</id>
    <published>2023-11-19T16:52:25.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h1>1 关系模式概述</h1><ul><li>关系数据库系统 是 <strong>支持关系模型的DBS</strong></li><li>关系模型的组成<ul><li>关系数据结构</li><li>关系操作集合</li><li>关系完整性约束</li></ul></li></ul><h2 id="1-1-关系数据结构-–-关系-二维表">1.1 关系数据结构 – 关系(二维表)</h2><ul><li>关系数据结构的特点：实体和联系都用关系这种单一的数据结构来实现</li></ul><h2 id="1-2-关系操作">1.2 关系操作</h2><ul><li>并、交、差、广义笛卡尔积、选择、投影、连接、除</li><li>插入、删除、修改</li><li>关系操作的特点<ul><li>操作对象和操作结果都是集合</li></ul></li></ul><h2 id="1-3-关系完整性约束">1.3 关系完整性约束</h2><ul><li>实体完整性、参照完整性、用户定义完整性</li></ul><h1>2 关系的形式化定义</h1><h2 id="2-1-关系的定义">2.1 关系的定义</h2><h3 id="2-1-1-定义">2.1.1 定义</h3><ul><li><strong>域</strong>：一组具有相同数据类型的值的集合，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">D_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示一个域</li><li><strong>关系</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub><mi>X</mi><msub><mi>D</mi><mn>2</mn></msub><mi>X</mi><mo>…</mo><mi>X</mi><msub><mi>D</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">D_1 X D_2 X \dots X D_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的一个子集叫做域<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">D_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>上的关系，表示为：<ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>D</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(D_1, D_2, \dots, D_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>为关系名，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>为关系的目或度</li></ul></li><li><strong>基数</strong>：一个域<strong>允许的不同取值</strong>个数称为这个域的基数<ul><li>关系中基数是指 <strong>行数</strong></li></ul></li></ul><h3 id="2-1-2-几个概念">2.1.2 几个概念</h3><img src="..\..\img\DB\候选码和主码.png" width="70%" height="70%" align="middle"><ul><li><strong>候选码</strong>：能唯一标识元组的属性(组)</li><li><strong>主码</strong>：多个候选码中选的一个作为主码</li><li><strong>主属性</strong>：候选码中的诸属性</li><li><strong>非主属性</strong>：不出现在任何候选码中的属性</li></ul><h2 id="2-2-关系的六条性质">2.2 关系的六条性质</h2><ul><li><strong>列是同质的</strong>：每一列中的风量来自同一域，数据类型相同</li><li><strong>不同列可以出自同一个域</strong></li><li><strong>列序无关性</strong></li><li><strong>任意两个元组不能完全相同</strong></li><li><strong>行许无关系</strong></li><li><strong>分量不可再分</strong></li></ul><h1>3 关系的完整性约束</h1><h2 id="3-1-实体完整性">3.1 实体完整性</h2><ul><li>若属性A是基本关系R的<strong>主属性</strong>，则A不能取空值</li></ul><h2 id="3-2-参照完整性">3.2 参照完整性</h2><h3 id="3-2-1-参照关系与外码">3.2.1 参照关系与外码</h3><ul><li><p>设F是关系R的一个或一组属性<strong>但不是R的码</strong>。如果F与关系S的<strong>主码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">K_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><strong>相对应，则称</strong>F是R的外码</strong>，<strong>R称为参照关系</strong>，<strong>S称为被参照关系(目标关系)</strong></p></li><li><p>例子：<br><img src="..\..\img\DB\参照关系与外码.png" width="70%" height="70%" align="middle"></p></li><li><p>说明</p><ul><li>关系R和S<strong>不一定是不同的关系</strong></li><li>目标关系S的主码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">K_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和参照关系的外码F必须在<strong>同一个(一组)域</strong>上</li><li>外码<strong>并不一定要与对应的主码同名</strong>，当位于不同关系时往往同名，以便识别</li></ul></li></ul><h3 id="3-2-2-参照完整性规则">3.2.2 参照完整性规则</h3><ul><li><p>若属性(组)F是关系R的<strong>外码</strong>，它与关系S的**主码<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>K</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">K_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>**相对应，则对于R中的每个元组在F上的值必须为：</p><ul><li>或者取<strong>空值</strong></li><li>或者等于<strong>S中某个元组的主码值</strong><br><img src="..\..\img\DB\参照完整性例子.png" width="70%" height="70%" align="middle"></li></ul></li><li><p>思考题：</p><ul><li>某关系R的外码是指<strong>其他关系的候选码</strong>，同时作为<strong>R的非主属性</strong></li><li>外码和被参照的主码可以不同名，但必须取自同一值域</li></ul></li></ul><h2 id="3-3-用户定义完整性">3.3 用户定义完整性</h2><ul><li>用户定义的完整性是针对某一具体关系数据库的约束条件，<strong>反映某一具体应用所涉及的数据</strong>必须满足的语义要求，如性别只能取&quot;男&quot;、&quot;女&quot;值。</li><li>通常由RDBMS的Check约束提供这类检查</li></ul><h1>4 关系代数</h1><h2 id="4-1-表示记号">4.1 表示记号</h2><img src="..\..\img\DB\关系代数表示记号1.png" width="70%" height="70%" align="middle"><img src="..\..\img\DB\关系代数表示记号2.png" width="70%" height="70%" align="middle"><img src="..\..\img\DB\关系代数表示记号3.png" width="70%" height="70%" align="middle"><h2 id="4-2-关系代数">4.2 关系代数</h2><h3 id="4-2-1-并、交、差">4.2.1 并、交、差</h3><ul><li>并、交、差 运算都是<strong>针对行的</strong></li></ul><h3 id="4-2-2-广义笛卡尔积">4.2.2 广义笛卡尔积</h3><ul><li>n + m 列</li><li>k1 * K2 行<br><img src="..\..\img\DB\关系代数-广义笛卡尔积.png" width="70%" height="70%" align="middle"></li></ul><h3 id="4-2-3-选择、投影、连接、除">4.2.3 选择、投影、连接、除</h3><h4 id="选择-取行">选择 -&gt; 取行</h4><ul><li>符号：<strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span></strong></li><li>含义：在关系R中选择满足给定条件的诸元组</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>σ</mi><mi>F</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo>∧</mo><mi>F</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><msup><mo>=</mo><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><msup><mtext>真</mtext><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\sigma_F(R)=\{t|t\in R \land F(t)=&#x27;真&#x27;\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">F</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0519em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel">=</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0519em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord cjk_fallback">真</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></span></p><ul><li>F：选择条件<br><img src="..\..\img\DB\关系代数-选择.png" width="70%" height="70%" align="middle"></li></ul><h4 id="投影-取列">投影 -&gt; 取列</h4><ul><li><p>相关符号<br><img src="..\..\img\DB\关系代数-属性列.png" width="70%" height="70%" align="middle"></p></li><li><p>符号：<strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span></span></strong></p></li><li><p>含义：在R中选择出若干属性列组成新的关系</p></li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>π</mi><mi>A</mi></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mo stretchy="false">[</mo><mi>A</mi><mo stretchy="false">]</mo><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>R</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\pi_A(R)=\{t[A]|t\in R\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mclose">]</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">}</span></span></span></span></span></p><ul><li>A：R中的属性列的集合<br><img src="..\..\img\DB\关系代数-投影.png" width="70%" height="70%" align="middle"></li></ul><p><strong>注：投影后不仅取消了原关系中的某些行，而且还可能取消某些元组(避免重复行)</strong></p><h4 id="连接-混合">连接 -&gt; 混合</h4><ul><li>符号：<strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋈</mo></mrow><annotation encoding="application/x-tex">\bowtie</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.51em;vertical-align:-0.005em;"></span><span class="mrel">⋈</span></span></span></span></strong></li><li>含义：从两个关系的广义笛卡尔积中选取属性间满足一定条件的元组</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span> 连接<br><img src="..\..\img\DB\关系代数-sigma连接.png" width="70%" height="70%" align="middle"></li></ul><h5 id="常用两种连接运算">常用两种连接运算</h5><ul><li><p><strong>等值运算</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span></span></span></span> 为’='的连接运算<br><img src="..\..\img\DB\关系代数-等值连接.png" width="70%" height="70%" align="middle"></li></ul></li><li><p><strong>自然连接</strong></p><ul><li>一种特殊的等值连接</li><li>关系中比较的两个分量必须是<strong>同名的属性(组)</strong></li><li>在结果中把重复的属性列去掉</li><li><strong>意义：将两个有关联的表合成一张有意义的表</strong><br><img src="..\..\img\DB\关系代数-自然连接.png" width="70%" height="70%" align="middle"></li></ul></li></ul><h5 id="外连接">外连接</h5><img src="..\..\img\DB\关系代数-外连接.png" width="70%" height="70%" align="middle"><h4 id="除-混合">除 -&gt; 混合</h4><ul><li><p>相关符号<br><img src="..\..\img\DB\关系代数-象集.png" width="70%" height="70%" align="middle"><br><img src="..\..\img\DB\关系代数-象集例子.png" width="70%" height="70%" align="middle"></p></li><li><p>符号：<strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>÷</mo></mrow><annotation encoding="application/x-tex">\div</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">÷</span></span></span></span></strong><br><img src="..\..\img\DB\关系代数-除.png" width="70%" height="70%" align="middle"></p></li></ul><img src="..\..\img\DB\关系代数-除例子.png" width="70%" height="70%" align="middle"><ul><li>例子：查询选修了全部课程的学号和姓名</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>π</mi><mrow><mi>s</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>s</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi></mrow></msub><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo><mo>⋈</mo><mo stretchy="false">(</mo><msub><mi>π</mi><mrow><mi>s</mi><mi>n</mi><mi>o</mi><mo separator="true">,</mo><mi>c</mi><mi>n</mi><mi>o</mi></mrow></msub><mo stretchy="false">(</mo><mi>S</mi><mi>C</mi><mo stretchy="false">)</mo><mo>÷</mo><msub><mi>π</mi><mrow><mi>c</mi><mi>n</mi><mi>o</mi></mrow></msub><mo stretchy="false">(</mo><mi>C</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{sno,sname}(S)\bowtie(\pi_{sno,cno}(SC)\div\pi_{cno}(C))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">o</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">nam</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">o</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">SC</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">o</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mclose">))</span></span></span></span></span></p><h1>5 关系代数实用案例</h1><ul><li><p><strong>详情见ppt第181页</strong></p></li><li><p>易错题1</p><ul><li>应该用除法<br><img src="..\..\img\DB\关系代数-易错题1.png" width="70%" height="70%" align="middle"></li></ul></li><li><p>易错题2<br><img src="..\..\img\DB\关系代数-易错题2.png" width="70%" height="70%" align="middle"></p></li><li><p>易错题3<br><img src="..\..\img\DB\关系代数-易错题3.png" width="70%" height="70%" align="middle"></p></li></ul><h1>6 关系演算</h1><ul><li>可分为<strong>元组演算</strong>和<strong>域演算(不讲)</strong></li></ul><h2 id="6-1-元组演算">6.1 元组演算</h2><ul><li>元组演算表达式：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi mathvariant="normal">Φ</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{t|\Phi(t)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣Φ</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)}</span></span></span></span><ul><li>t称为元组变量</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Φ</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Phi(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Φ</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span>称为元组演算公式</li></ul></li><li>原子公式：<br><img src="..\..\img\DB\元组演算-原子公式.png" width="70%" height="70%" align="middle"></li></ul><h2 id="6-2-关系代数表达式与元组演算表达式的等价转换">6.2 关系代数表达式与元组演算表达式的等价转换</h2><img src="..\..\img\DB\元组演算-等价转换.png" width="70%" height="70%" align="middle"><h2 id="6-3-例子">6.3 例子</h2><p><a url="https://www.cnblogs.com/SimbaWang/p/13252557.html">蕴含式(包含EXISTS的运用与分析) </a></p><img src="..\..\img\DB\元组演算-例子.png" width="70%" height="70%" align="middle"><h1>7 关系演算实用案例 - <font color=red>难点</font></h1><ul><li><strong>详情见ppt第206页</strong></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1 关系模式概述&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;关系数据库系统 是 &lt;strong&gt;支持关系模型的DBS&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;关系模型的组成
&lt;ul&gt;
&lt;li&gt;关系数据结构&lt;/li&gt;
&lt;li&gt;关系操作集合&lt;/li&gt;
&lt;li&gt;关系完整性约束&lt;/li&gt;
&lt;/ul</summary>
      
    
    
    
    <category term="数据库系统" scheme="https://escapeey.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="知识点" scheme="https://escapeey.github.io/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
  </entry>
  
  <entry>
    <title>数据库系统1-概述</title>
    <link href="https://escapeey.github.io/post/8bcdf547.html"/>
    <id>https://escapeey.github.io/post/8bcdf547.html</id>
    <published>2023-11-19T16:23:03.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h1>1 数据库系统概述</h1><h2 id="1-1-数据库管理系统DBMS">1.1 数据库管理系统DBMS</h2><ul><li>DBMS是位于用户与操作系统之间的一层数据管理软件。</li><li>功能：<ul><li>数据定义功能 – 数据定义语言<strong>DDL</strong></li><li>数据组织、存储和管理功能</li><li>数据库操纵功能 – 数据库操纵语言<strong>DML</strong></li><li>数据控制功能<ul><li>数据的安全性保护</li><li>数据的完整性检查</li><li>并发控制</li><li>数据库恢复</li></ul></li></ul></li></ul><h2 id="1-2-数据库系统DBS">1.2 数据库系统DBS</h2><ul><li>特点：<ul><li>数据结构化</li><li>数据的共享性高、冗余度低且易扩充</li><li>数据独立性高</li><li>数据由DBMS统一管理和控制</li></ul></li></ul><h1>2 概念模型与数据模型</h1><img src="..\..\img\DB\模型抽象.png" width="70%" height="70%" align="middle"><h2 id="2-1-概念模型">2.1 概念模型</h2><ul><li>概念模型也称信息模型，是对现实世界的事物符号化的描述</li><li><strong>现实世界</strong>到<strong>信息世界</strong>是<strong>第一级抽象</strong></li><li>信息世界的主要概念<ul><li><strong>实体</strong>：客观存在的各类事物 如：学生</li><li><strong>属性</strong>：实体所具有的特性 如：学号</li><li><strong>实体型</strong>：用实体名及属性名集抽象实体 如：学生(学号，姓名，性别)</li><li><strong>实体集</strong>：同型实体的集合</li><li><strong>码</strong>：能<strong>唯一标识</strong>实体的属性集</li><li><strong>域</strong>：属性的取值范围</li><li><strong>联系</strong>：不同实体集中实体之间的联系<ul><li>一对一联系</li><li>一对多联系</li><li>多对多联系</li></ul></li></ul></li><li>E-R图建立概念模型<br><img src="..\..\img\DB\E-R图.png" width="70%" height="70%" align="middle"></li></ul><h2 id="2-2-数据模型">2.2 数据模型</h2><ul><li><strong>信息世界</strong>到<strong>机器世界</strong>是<strong>第二级抽象</strong></li><li>数据模型是概念模型的数据化，从计算机角度出发，提供表示和组织数据的方法，对应机器世界</li><li>数据模型三要素：<ul><li>数据结构：记录间的组织形式</li><li>数据操纵：建立在特定结构下的操纵实现</li><li>数据完整性约束：记录内部及记录间的限定</li></ul></li><li>数据模型的分类<ul><li>层次模型：树形结构</li><li>网状模型：图型结构</li><li>关系模型：表型结构</li><li>面向对象模型：对象结构</li></ul></li></ul><h3 id="2-2-1-关系模型">2.2.1 关系模型</h3><img src="..\..\img\DB\关系模型的数据结构.png" width="70%" height="70%" align="middle"><ul><li>关系模式：对关系数据结构的描述，即<ul><li>关系名(属性1，属性2，···,属性n)</li><li>例：学生(学号，姓名，年龄，性别)</li></ul></li></ul><h3 id="2-2-2-E-R图向关系模型的转换">2.2.2 E-R图向关系模型的转换</h3><ul><li>实体型 -&gt; 关系模式<ul><li>实体型的属性 -&gt; 关系的属性</li><li>实体码 -&gt; 关系的码</li></ul></li><li>联系的转换<ul><li>1:1联系：将<strong>其中一端</strong>的码连同联系的属性放入<strong>另一端</strong></li><li>1:n联系：将<strong>1端</strong>的码连同联系的属性放入<strong>n端</strong></li><li>m:n联系：将<strong>1端</strong>的码、<strong>n端</strong>的码连同联系的属性组成一个新的关系模式</li></ul></li></ul><h3 id="2-2-3-数据操纵与完整性约束">2.2.3 数据操纵与完整性约束</h3><ul><li>数据操纵<ul><li>数据操作是集合操作，操作对象和操作结果都是关系</li><li>查询、插入、删除、修改</li></ul></li><li>完整性约束<ul><li>实体完整性</li><li>参照完整性</li><li>用户定义完整性</li></ul></li></ul><h1>3 数据库系统结构</h1><p>两种划分</p><ul><li>从DBMS角度看：三级模式结构</li><li>从数据库最终用户角度看<ul><li>集中式结构</li><li>分布式结构</li><li>C/S结构</li><li>并行结构</li></ul></li></ul><h2 id="3-1-三级模式结构">3.1 三级模式结构</h2><img src="..\..\img\DB\三级模式映像.png" width="70%" height="70%" align="middle"><img src="..\..\img\DB\三级模式映像实例.png" width="70%" height="70%" align="middle"><h3 id="3-1-1-模式-逻辑模式">3.1.1 模式(逻辑模式)</h3><ul><li>数据库中全体数据的逻辑结构和特征的描述，是<strong>所有用户的公共数据视图</strong></li><li>模式的地位：<ul><li>是DBS模式结构的中间层</li><li>与数据的物理存储细节和硬件无关</li><li>与具体应用程序等无关</li></ul></li><li>一个数据库只能有1个模式</li></ul><h3 id="3-1-2-外模式-用户模式">3.1.2 外模式(用户模式)</h3><ul><li>数据库用户(程序员和最终用户)使用的<strong>局部数据描述</strong>，是数据库用户的数据视图，<strong>与具体某一用户有关</strong></li><li>外模式的地位：<ul><li>介于模式与应用之间</li></ul></li><li>模式与外模式的关系：<strong>一对多</strong><ul><li>外模式通常是模式的子集</li><li>一个数据库可以有多个外模式</li></ul></li><li>外模式与应用的关系：<strong>一对多</strong><ul><li>同一个外模式可以为某一用户的多个应用系统所使用</li><li>一个应用程序只能使用一个外模式</li></ul></li></ul><h3 id="3-1-3-内模式-存储模式">3.1.3 内模式(存储模式)</h3><ul><li>是数据物理结构和存储方式的描述</li><li>是数据在数据库内部的表示方式<ul><li>记录的存储方式</li><li>索引的组织方式</li><li>数据是否压缩存储</li><li>数据是否加密</li></ul></li><li>一个数据库只有一个内模式</li></ul><h3 id="3-1-4-外模式-模式映像">3.1.4 外模式/模式映像</h3><ul><li>定义外模式与模式之间的对应关系</li><li>每一个外模式都包含一个外模式/模式映像</li><li>映像定义通常包含在各自外模式的描述中</li><li>用途 – <strong>保证数据的逻辑独立性</strong><ul><li>当模式改变时，DBA修改有关外模式/模式映像，使外模式保持不变</li><li>因而应用程序不必修改，保证了数据和程序的逻辑独立性</li></ul></li></ul><h3 id="3-1-5-模式-内模式映像">3.1.5 模式/内模式映像</h3><ul><li>定义了数据全局逻辑结构与存储结构之间的对应关系</li><li>用途 – <strong>保证数据的物理独立性</strong><ul><li>当数据的存储结构改变了，DBA修改模式/内模式映像，使模式保持不变</li><li>因而应用程序不必修改，保证了数据和程序的物理独立性</li></ul></li></ul><h1>4 数据库系统的组成</h1><img src="..\..\img\DB\数据库系统的组成.png" width="70%" height="70%" align="middle"><ul><li><strong>数据库管理员 DBA</strong><ul><li>决定数据库中的信息内容和结构</li><li>决定数据库的存储结构和存取策略</li><li>定义数据的安全性要求和完整性约束条件</li><li>监控数据库的使用和运行</li><li>数据库的改进和重组</li></ul></li></ul><h1>5 总结</h1><ul><li>关键词<br>DBMS、DBS、主码、关系、关系模式、模式、外模式、内模式、模式映射、E-R图转关系模型</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1 数据库系统概述&lt;/h1&gt;
&lt;h2 id=&quot;1-1-数据库管理系统DBMS&quot;&gt;1.1 数据库管理系统DBMS&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;DBMS是位于用户与操作系统之间的一层数据管理软件。&lt;/li&gt;
&lt;li&gt;功能：
&lt;ul&gt;
&lt;li&gt;数据定义功能 – 数据定义语言&lt;s</summary>
      
    
    
    
    <category term="数据库系统" scheme="https://escapeey.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="知识点" scheme="https://escapeey.github.io/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    
  </entry>
  
  <entry>
    <title>收藏夹-计算机</title>
    <link href="https://escapeey.github.io/post/7df71ba4.html"/>
    <id>https://escapeey.github.io/post/7df71ba4.html</id>
    <published>2023-11-08T18:28:11.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h2 id="操作系统">操作系统</h2><h3 id="银行家算法"><a href="https://www.cnblogs.com/wkfvawl/p/11929508.html">银行家算法</a></h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;操作系统&quot;&gt;操作系统&lt;/h2&gt;
&lt;h3 id=&quot;银行家算法&quot;&gt;&lt;a href=&quot;https://www.cnblogs.com/wkfvawl/p/11929508.html&quot;&gt;银行家算法&lt;/a&gt;&lt;/h3&gt;
</summary>
      
    
    
    
    <category term="收藏夹" scheme="https://escapeey.github.io/categories/%E6%94%B6%E8%97%8F%E5%A4%B9/"/>
    
    
    <category term="收藏夹" scheme="https://escapeey.github.io/tags/%E6%94%B6%E8%97%8F%E5%A4%B9/"/>
    
  </entry>
  
  <entry>
    <title>操作系统</title>
    <link href="https://escapeey.github.io/post/d04bd5bc.html"/>
    <id>https://escapeey.github.io/post/d04bd5bc.html</id>
    <published>2023-11-02T09:10:22.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h1>操作系统概述</h1><h2 id="操作系统定义">操作系统定义</h2><p><strong>操作系统</strong>：是管理计算机系统资源、控制程序执行、改善人机界面和为应用软件提供支持的一种系统<font color=red>软件</font>。</p><h3 id="多道程序设计：">多道程序设计：</h3><p>现代操作系统一般都采用多道程序设计技术，其基本思想是在主存中同时存放多个用户的作业，使之同时处于运行状态而共享系统资源。</p><p>多道程序设计——多个程序同时进入主存并发执行。</p><h2 id="操作系统的作用">操作系统的作用</h2><h3 id="OS作为用户与计算机硬件系统之间的接口">OS作为用户与计算机硬件系统之间的接口</h3><ul><li>OS是一个系统软件，因而这种接口是<strong>软件接口</strong>。</li></ul><h3 id="OS作为计算机系统资源的管理者">OS作为计算机系统资源的管理者</h3><p>OS的<strong>主要功能</strong>为:</p><ul><li><strong>处理机管理</strong>：用于分配和控制处理机；</li><li><strong>存储器管理</strong>：主要负责内存的分配与回收；</li><li><strong>I/O设备管理</strong>：负责I/O设备的分配与操纵；</li><li><strong>文件管理</strong>：负责文件的存取、共享和保护。可见，OS确是计算机系统资源的管理者。</li></ul><h3 id="OS实现了对计算机资源的抽象">OS实现了对计算机资源的抽象</h3><ul><li>通常把覆盖了软件的机器称为扩充机器或虚机器。</li></ul><h2 id="操作系统的基本特性">操作系统的基本特性</h2><h3 id="并发">并发</h3><ul><li><strong>并行性</strong>：指两个或多个事件在同一时刻发生</li><li><strong>并发性</strong>：指两个或多个事件在同一时间间隔内发生<ul><li>在多道程序环境下，并发性是指在一段时间内，宏观上有多个程序在同时运行，但在单处理机系统中，每一时刻却仅能有一道程序执行，故微观上这些程序只能是分时地交替执行。</li></ul></li></ul><h3 id="共享">共享</h3><ul><li><strong>共享</strong>的概念：指系统中的资源，可供内存中多个并发执行的进程(线程)共同使用 。</li><li>进程对资源共享的方式：<ul><li><strong>互斥共享</strong>：当某一进程访问完并释放该资源后，才允许另一进程进行访问。这种资源称为<font color=red>临界资源</font>或独占资源,如打印机；</li><li><strong>同时共享</strong>：允许在一段时间内由多个进程同时访问，如磁盘设备</li></ul></li></ul><h3 id="虚拟">虚拟</h3><h4 id="定义">定义</h4><ul><li>操作系统中的所谓“<strong>虚拟</strong>”，是指通过某种技术把一个物理实体变为若干个逻辑上的对应物。</li><li>在OS中利用了多种虚拟技术，分别用来实现虚拟处理机、虚拟内存(设置：我的电脑、属性、高级、性能选项)、 虚拟外部设备(虚拟光驱、盘符D：等)和虚拟信道等。</li></ul><h4 id="OS中采用的2种虚拟技术">OS中采用的2种虚拟技术</h4><ul><li><strong>时分复用技术</strong> -多设备分时使用物理设备<ul><li>利用该技术可以实现虚拟处理机、虚拟设备等，以<strong>提高资源利用率</strong>。</li><li>虚拟处理机：是通过多道程序设计技术，让多道程序并发执行的方法，来分时使用一台处理机的。</li><li>虚拟设备技术：将一台物理I/O设备虚拟为多台逻辑上的I/O设备。 如虚拟打印机。</li></ul></li><li><strong>空分复用技术</strong><ul><li>利用该技术可以实现虚拟磁盘技术、虚拟存储器技术等，以<strong>提高存储空间利用率</strong>。</li><li>虚拟磁盘技术：一个硬盘划分为1、2、3、4四个卷，分别安装在C、D、E、F四个逻辑驱动器上，成为四个虚拟磁盘。</li><li>虚拟存储器技术：一个100M的程序可以运行在20M的内存空间</li></ul></li></ul><h3 id="异步性">异步性</h3><ul><li>在多道程序环境下，允许多个进程并发执行。使进程的执行是以“走走停停”的方式运行；</li><li><strong>进程的异步性</strong>: 每个程序在何时执行，多个程序间的执行顺序以及完成每道程序所需的时间都是不确定和不可预知的。进程是以人们不可预知的速度向前推进</li></ul><h2 id="操作系统结构设计">操作系统结构设计</h2><ul><li>第一代：无结构OS；</li><li>第二代：模块化结构OS；</li><li>分层式操作系统；</li></ul><h3 id="模块化结构OS">模块化结构OS</h3><ul><li>模块之间直接调用函数，除了函数调用的开销外，没有额外开销</li><li>庞大的操作系统有数以千计的函数</li></ul><h3 id="微内核-Micro-Kelnel-结构OS-现代结构">微内核(Micro Kelnel)结构OS -现代结构</h3><h4 id="微内核技术">微内核技术</h4><ul><li><p><strong>微内核技术</strong>: 指精心设计的、能实现现代OS核心功能的小型内核，它与一般的OS(程序)不同，它更小更精炼，它不仅运行在核心态，而且<strong>开机后常驻内存</strong>。</p></li><li><p>微内核<strong>并非</strong>是一个完整的OS， 而只是为构建通用OS提供一个重要基础。在微内核OS结构中，通常都采用了<strong>客户/服务器模式</strong>。<br><img src="..\img\OS\os微内核.png" width="70%" height="70%" align="middle"></p></li><li><p><strong>优缺点</strong></p><ul><li>内核与各个服务器之间通过通信机制进行交互，这使得微内核结构的效率大打折扣</li><li>因为各个服务器模块的相对独立性，使得其维护相对容易。</li></ul></li></ul><h4 id="客户-服务器模式">客户/服务器模式</h4><p>客户/服务器系统主要由<strong>客户机</strong>、<strong>服务器</strong>和<strong>网络系统</strong>三个部分组成。</p><ul><li>客户机：平时处理本地业务，也可发送一个消息给服务器，以请求某项服务</li><li>服务器：通常是一台规模较大的机器，在其上驻留有网络文件系统或数据库系统等，为用户提供多种服务。</li></ul><h4 id="面向对象的程序设计技术">面向对象的程序设计技术</h4><ul><li>在OS中的各类实体如进程、线程、消息、存储器和文件等，都使用了对象这一概念，相应地，便有了进程对象、线程对象、存储器对象和文件对象等</li><li>操作系统是一个极其复杂的大型软件系统，面向对象技术被广泛应用于现代操作系统的设计中。</li></ul><h4 id="微内核的基本功能">微内核的基本功能</h4><p>通常都是一些最基本的功能：</p><ul><li>进程(线程)管理。</li><li>低级存储器管理。</li><li>中断和陷入处理。<br>将OS中<strong>最基本</strong>的部分放入内核中，而把OS的<strong>绝大部分功能</strong>放在微内核**外面的一组服务器（进程）**中实现。</li></ul><h4 id="微内核操作系统存在的问题">微内核操作系统存在的问题</h4><p>微内核OS的<strong>运行效率有所降低：</strong><br>会引起更多的上下文切换。例如某个服务器自身尚无能力完成客户请求，而需其它服务器帮助时，如图1-11中所示，其中的文件服务器还需要磁盘服务器的帮助，这时就需要进行八次上下文的切换。<br><img src="..\img\OS\os微内核缺点.png" width="70%" height="70%" align="middle"></p><h1>进程管理</h1><h2 id="进程的描述与控制">进程的描述与控制</h2><h3 id="程序的顺序执行及其特征">程序的顺序执行及其特征</h3><p>程序顺序执行时的特征:</p><ul><li><strong>顺序性</strong>: 按照程序结构所指定的次序</li><li><strong>封闭性</strong>: 运行时候独占处理机资源，运行结果不受外界影响</li><li><strong>可再现性</strong>: 初始条件相同，结果相同</li></ul><h3 id="程序的并发执行及其特征">程序的并发执行及其特征</h3><p><strong>定义</strong>：程序的并发执行是指一组在逻辑上互相独立的程序或程序段在执行时间上客观上互相重叠，即一个程序或程序段的执行尚未结束，另一个程序（段）的执行已经开始的执行方式<br>程序并发执行时的特征:</p><ul><li><strong>间断性(相互制约性)</strong>:－ “走走停停”，一个程序可能走到中途停下来，失去原有的时序关系；</li><li><strong>失去封闭性</strong>：多个程序共享系统中的各种资源，因而这些资源的状态将由多个程序来改变, 致使程序的运行已失去了封闭性。</li><li><strong>不可再现性</strong>：程序在并发执行时，由于失去了封闭性，也将导致失去其可再现性</li></ul><h3 id="进程">进程</h3><h4 id="进程的定义">进程的定义</h4><ul><li>简：进程是程序的一次执行；</li><li>详：一个具有一定独立功能的<strong>程序</strong>在一个<strong>数据集合</strong>上的一次<strong>动态执行</strong>过程</li><li>进程是系统进行<strong>资源分配和调度</strong>的一个<strong>独立单位</strong></li></ul><h4 id="进程的特征">进程的特征</h4><ul><li><strong>动态性</strong>:<ul><li>进程是程序产生的：创建-&gt;运行-&gt;消亡</li><li>进程在生命周期中在三种基本状态之间转换</li></ul></li><li><strong>独立性</strong>:<br>各进程的<strong>地址相互独立</strong>，除非采用进程间通信手段</li><li><strong>并发性</strong>:<br>多个进程实体同时存于内存中，能在一段时间内并发进行</li><li><strong>异步性</strong>:<br>每个进程都以其相对独立的不可预知的速度向前推进</li><li><strong>结构化</strong>:<br>进程 = 代码块 + 数据块 + <strong>PCB</strong></li></ul><h4 id="进程的组成">进程的组成</h4><p><strong>进程 = 程序 + 数据 + 进程控制块PCB</strong></p><ul><li><strong>程序</strong>是进程的不可缺少的组成部分；如果一个程序段允许被共享，则它应该是可重入的，或纯代码段</li><li><strong>数据</strong>是进程处理的对象</li><li><strong>进程控制块</strong>是进程的<strong>控制结构</strong>，包含了进程的<strong>描述信息</strong>、<strong>控制信息</strong>和<strong>资源信息</strong>以及<strong>现场保护区</strong>，是进程的<font color=red><strong>唯一标识</strong></font>，系统通过PCB管理和控制进程。</li></ul><h4 id="进程控制块PCB">进程控制块PCB</h4><ul><li>进程控制块是由OS维护的用来记录进程相关信息和管理进程而设置的一个专门的<strong>数据结构</strong></li><li>PCB结构的全部或部分<strong>常驻内存</strong>；</li><li>PCB随进程的创建而填写，随进程的撤消而释放,有生命周期；</li><li>系统利用PCB来控制和管理进程，所以PCB是系统感知进程存在的唯一标志</li><li>进程与PCB是一一对应的</li><li><strong>OS是根据PCB来对并发执行的进程进行控制和管理的。</strong></li><li><strong>所谓创建进程是指创建进程实体中的PCB，撤销亦如此。</strong></li></ul><h5 id="PCB的内容">PCB的内容</h5><ul><li><strong>进程标识符</strong>:<ul><li>内部进程标识符(process ID)，唯一，通常是一个整数</li><li>进程名(外部标识符)，通常基于可执行文件名（不唯一）</li><li>用户标识符(user ID)；进程组关系(process group)</li></ul></li><li><strong>进程调度信息</strong>：<br>进程状态、进程优先级、资源信息等</li><li><strong>处理机状态</strong>：<br>寄存器值（通用、程序计数器PC、状态PSW，地址包括栈指针）</li><li><strong>进程控制信息</strong>:<ul><li>当前状态；</li><li>优先级(priority)；</li><li>代码执行入口地址；</li><li>程序的外存地址；</li><li>运行统计信息（执行时间、页面调度）；</li><li>进程间同步和通信；阻塞原因</li></ul></li></ul><h5 id="PCB的组织方式">PCB的组织方式</h5><ul><li><strong>链表</strong>：同一状态的进程其PCB成一链表，多个状态对应多个不同的链表<ul><li>各状态的进程形成不同的链表：就绪链表、阻塞链表</li></ul></li><li><strong>索引表</strong>：同一状态的进程归入一个index表（由index指向PCB），多个状态对应多个不同的index表<ul><li>各状态的进行形成不同的索引表：就绪索引表、阻塞索引表</li></ul></li></ul><h4 id="进程与程序的区别">进程与程序的区别</h4><ul><li>进程是动态的，程序是静态的：炒菜菜谱</li><li>进程是暂时的，程序的永久的：进程是一个状态变化的过程，程序可长久保存。</li><li>进程与程序的组成不同：进程的组成包括程序、数据和进程控制块（即进程状态信息）。</li><li>进程与程序的对应关系：通过多次执行，一个程序可对应多个进程；通过调用关系，一个进程可包括多个程序。</li><li>进程具有并行特征，程序没有。</li><li>进程是竞争计算机资源的基本单位。</li></ul><h3 id="进程的状态及其转换">进程的状态及其转换</h3><h4 id="进程的三种基本状态">进程的三种基本状态</h4><ul><li><strong>就绪状态(Ready)</strong>：已分配到<strong>除CPU以外</strong>的所有必要的资源，只要能再获得处理机，便可立即执行的状态。多个排成一队称为就绪队列。</li><li><strong>执行状态(Running)</strong>：指进程已获得处理机，其程序正在执行;<ul><li>在单处理机系统中，只能有一个进程处于执行状态;</li><li>在多处理机系统中，则可能多个进程处于执行状态。 </li></ul></li><li><strong>阻塞状态(Blocked)</strong>：进程因<strong>发生某事件</strong>(如请求I／O、申请缓冲空间等)而暂停执行时的状态，亦即进程的执行受到阻塞，故称这种暂停状态为阻塞状态，有时也称为“等待”状态或“睡眠”状态。<ul><li>通常将处于阻塞状态的进程排成一个队列，称为阻塞队列。在有的系统中，按阻塞原因的不同而将处于阻塞状态的进程排成多个队列。</li></ul></li></ul><h4 id="进程的三种基本状态转换">进程的三种基本状态转换</h4><img src="..\img\OS\进程三状态.png" width="70%" height="70%" align="middle"><ul><li><strong>就绪-&gt;运行</strong>：调度程序选择一个新的进程运行</li><li><strong>运行-&gt;就绪</strong>：<ul><li>运行进程用完了时间片</li><li>运行进程被中断，因为一高优先级进程处于就绪状态</li></ul></li><li><strong>运行-&gt;等待</strong>：当一进程等待某一事件的发生时，如<ul><li>请求系统服务</li><li>无新工作可做</li></ul></li><li><strong>等待-&gt;就绪</strong>：当所等待的事件发生时</li></ul><h4 id="进程的五状态进程转换">进程的五状态进程转换</h4><img src="..\img\OS\进程五状态.png" width="70%" height="70%" align="middle"><ul><li><strong>创建状态(New)</strong>：创建新状态<ul><li>OS 已完成为创建一进程所必要的工作<ul><li>已构造了进程标识符</li><li>已创建了管理进程所需的表格</li></ul></li></ul></li><li><strong>终止状态(Exit)</strong><ul><li>终止后进程移入该状态</li><li>它不再有执行资格</li><li>表格和其它信息暂时保留</li><li>实用程序为了分析性能和利用率，可能要提取程序的历史信息</li></ul></li></ul><h4 id="带挂起的进程转换模型">带挂起的进程转换模型</h4><h5 id="新增状态">新增状态</h5><ul><li><strong>就绪挂起状态(Ready,suspend)</strong>：进程在外存，但只要进入内存，即可运行；</li><li><strong>阻塞挂起状态(Blocked,suspend)</strong>：进程在外存并等待某事件的出现；</li></ul><h5 id="新增事件">新增事件</h5><ul><li><strong>挂起(Suspend)</strong>：把一个进程从内存转到外存；可能有以下几种情况：<ul><li><strong>阻塞到阻塞挂起</strong>：没有进程处于就绪状态或就绪进程要求更多内存资源时，会进行这种转换，以纳入新进程或运行就绪进程；</li><li><strong>就绪到就绪挂起</strong>：当有高优先级阻塞（系统认为会很快就绪的）进程和低优先级就绪进程时，系统会选择挂起低优先级就绪进程；</li><li><strong>运行到就绪挂起</strong>：对抢先式分时系统，当有高优先级阻塞挂起进程因事件出现而进入就绪挂起时，系统可能会把运行进程转到就绪挂起状态；</li></ul></li><li><strong>激活(Activate)</strong>：把一个进程从外存转到内存；可能有以下几种情况：<ul><li><strong>就绪挂起到就绪</strong>：没有就绪进程或挂起就绪进程优先级高于就绪进程时，会进行这种转换；</li><li><strong>阻塞挂起到阻塞</strong>：当一个进程释放足够内存时，系统会把一个高优先级阻塞挂起（系统认为会很快出现所等待的事件）进程转为阻塞状态；较少出现。</li></ul></li><li><strong>事件出现(Event Occurs)</strong>：进程等待的事件出现；如：操作完成、申请成功等；可能的情况有：<ul><li><strong>阻塞到就绪</strong>：针对内存进程的事件出现；</li><li><strong>阻塞挂起到就绪挂起</strong>：针对外存进程的事件出现；</li></ul></li><li><strong>收容(Admit)</strong>：收容一个新进程，进入就绪状态或就绪挂起状态。</li><li><strong>各种状态-&gt;退出</strong>：被父进程终止或父进程本身终止。</li></ul><h5 id="挂起进程目的是">挂起进程目的是:</h5><ul><li><strong>提高处理机效率</strong>：就绪进程表为空时，OS将阻塞进程从内存中“挂起”到磁盘的“挂起队列”，再从该队列选另一进程进入内存，或接受一个新进程的请求。</li><li><strong>为运行进程提供足够内存</strong>：资源紧张时，暂停某些进程，如：CPU繁忙（或实时任务执行）,内存紧张</li><li><strong>用于调试</strong>：在调试时，挂起被调试进程（从而对其地址空间进行读写）</li></ul><h5 id="单挂起进程模型">单挂起进程模型</h5><img src="..\img\OS\单挂起进程模型.png" width="70%" height="70%" align="middle"><h5 id="双挂起进程模型">双挂起进程模型</h5><img src="..\img\OS\双挂起进程模型.png" width="70%" height="70%" align="middle"><h3 id="进程控制的功能">进程控制的功能</h3><h4 id="原语-primitive">原语(primitive)</h4><ul><li>由若干条指令构成的“原子操作(atomic operation)”过程，作为一个整体而不可分割－－要么全都完成，要么全都不做。许多系统调用就是原语。</li></ul><h4 id="进程创建原语">进程创建原语</h4><p>子进程的创建的3种形式</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">产生新进程</th><th style="text-align:center">不产生新进程</th></tr></thead><tbody><tr><td style="text-align:center">复制现有进程的上下文</td><td style="text-align:center"><strong>fork</strong>(新进程的系统上下文会有不同)</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">加载程序</td><td style="text-align:center"><strong>spawn</strong>(创建新进程并加载新程序)</td><td style="text-align:center"><strong>exec</strong>(加载新程序并覆盖自身)</td></tr></tbody></table><h4 id="进程撤销原语">进程撤销原语</h4><p><strong>Destroy</strong></p><ul><li>释放资源：<ul><li>释放内外存空间</li><li>关闭所有打开文件</li><li>释放共享内存段和各种锁定lock</li></ul></li></ul><h4 id="进程阻塞原语">进程阻塞原语</h4><p><strong>Block</strong></p><ul><li>阻塞原因：当进程期待的某事件尚未出现时，该进程调用阻塞原语把自己阻塞起来</li><li>进程的阻塞是进程自身的一种主动行为</li></ul><h4 id="进程唤醒原语">进程唤醒原语</h4><p><strong>Wakeup</strong></p><ul><li>唤醒原因：<ul><li>进程等待的事件发生，等待队列中的进程唤醒。</li></ul></li><li>唤醒进程的两种方法：<ul><li><strong>由系统进程唤醒</strong>: 系统进程统一控制事件的发生，并将“事件发生”这一消息通知等待进程。等待的是公共资源。</li><li><strong>由事件发生进程唤醒</strong>: 事件发生进程与被唤醒的进程是合作关系，等待私有资源。</li></ul></li></ul><h4 id="进程挂起原语">进程挂起原语</h4><p><strong>Suspend</strong></p><ul><li>引起进程挂起的事件:<ul><li>用户进程请求将自己挂起;</li><li>或父进程请求将自己的某个子进程挂起，</li><li>系统将利用挂起原语suspend( )将指定进程或处于阻塞状态的进程挂起。</li></ul></li></ul><h4 id="进程激活原语">进程激活原语</h4><p><strong>Active</strong></p><ul><li>进程的激活过程<ul><li>系统将利用激活原语active( )将指定进程激活。 激活原语先将进程从外存调入内存，检查该进程的现行状态，若是就绪挂起，便将之改为活动就绪；若为阻塞挂起便将之改为活动阻塞。</li></ul></li></ul><h2 id="进程同步">进程同步</h2><h3 id="1-一组并发进程执行时存在两种相互制约关系：">1.一组并发进程执行时存在两种相互制约关系：</h3><ul><li><strong>进程互斥</strong> (打印机)<ul><li><strong>资源共享关系</strong>（间接相互制约关系）</li><li>进程本身之间<strong>不存在直接联系</strong>。</li><li>例如:在仅有一台打印机的系统中，有两个进程A和B，如果在A进程提出打印请求时，系统已将打印机分配给进程B，则系统让A进程等待，直至B将打印机用完并释放后，系统才将打印机分配给进程A。</li></ul></li><li><strong>进程同步</strong> (接力棒)<ul><li><strong>相互合作关系</strong>（直接相互制约关系）</li><li>进程本身之间<strong>存在着相互制约的关系</strong>。</li><li>例如：有一输入进程A通过单缓冲向进程B提供数据。当该缓冲空时，计算进程B因不能获得所需数据而等待。当进程A把数据送入缓冲时，便应向进程B发送一信号，将它唤醒</li></ul></li></ul><h3 id="2-临界资源">2.临界资源</h3><ul><li>临界资源: 在一段时间内只允许<strong>一个进程访问</strong>的资源。诸进程间应采取<strong>互斥方式</strong>，实现对资源的共享。</li><li>共享变量，打印机 等均属于此类资源。</li></ul><h3 id="3-临界区">3.临界区</h3><h4 id="临界区的定义与进入">临界区的定义与进入</h4><ul><li><strong>临界区</strong>(critical section)：<br>在每个进程中访问临界资源的那段代码</li><li><strong>进入区</strong>：<br>在临界区前面增加一段用于进行临界资源检查的代码</li><li><strong>退出区</strong>：<br>将临界区正被访问的标志恢复为未被访问的标志。</li><li><strong>剩余区</strong>：其余部分。</li></ul><h4 id="使用临界区遵循的原则">使用临界区遵循的原则</h4><ul><li><strong>空闲则入</strong>：其他进程均不处于临界区；</li><li><strong>忙则等待</strong>：已有进程处于其临界区；</li><li><strong>有限等待</strong>：等待进入临界区的进程不能&quot;死等&quot;；</li><li><strong>让权等待</strong>：不能进入临界区的进程，应释放CPU(如转换到阻塞状态)</li></ul><h4 id="解决诸进程互斥进入临界区的方法">解决诸进程互斥进入临界区的方法</h4><ul><li>硬件同步机制</li><li>软件同步机制</li></ul><h3 id="4-硬件同步机制">4.硬件同步机制</h3><p>目的：解决诸进程互斥进入临界区。<br>目前许多计算机已提供了一些特殊的硬件指令来解决临界区问题。</p><ul><li>关中断；<ul><li>关中断是实现互斥的最简单的方法之一。在进入锁测试之前关闭中断，直到完成锁测试并上锁之后才能打开中断。</li><li>关中断的方法存在许多缺点：<ul><li>滥用关中断权力可能导致严重后果；</li><li>关中断时间过长，会影响系统效率，限制了处理器交叉执行程序的能力；</li><li>关中断方法也不适用于多CPU 系统，因为在一个处理器上关中断并不能防止进程在其它处理器上执行相同的临界段代码。</li></ul></li></ul></li><li>利用Test-and-Set指令实现互斥；</li><li>利用Swap指令实现进程互斥；</li></ul><h3 id="5-软件同步机制-进程互斥的软件方法">5.软件同步机制(进程互斥的软件方法)</h3><h4 id="利用信号量机制实现进程互斥">利用信号量机制实现进程互斥</h4><h3 id="6-管程-monitor">6.管程(monitor)</h3><h2 id="进程通信及线程">进程通信及线程</h2><h2 id="处理机调度与死锁–完成进程状态的转换">处理机调度与死锁–完成进程状态的转换</h2><h1>存储器管理</h1><p>存储管理是指存储器资源（主要指内存并涉及外存）的管理。</p><ul><li><strong>存储器资源的组织</strong>（如内存的组织方式）</li><li><strong>地址变换</strong>（逻辑地址与物理地址的对应关系维护）</li><li><strong>虚拟存储的调度算法</strong></li></ul><h2 id="存储管理的功能">存储管理的功能</h2><ol><li><strong>主存分配和回收</strong><br>分配和回收算法及相应的数据结构。</li><li><strong>地址变换</strong><ul><li>可执行文件生成中的链接技术</li><li>程序加载(装入)时的重定位技术</li><li>进程运行时硬件和软件的地址变换技术和机构</li></ul></li><li><strong>存储共享和保护</strong><ul><li>代码和数据共享</li><li>地址空间访问权限（读、写、执行）</li></ul></li><li><strong>主存容量扩充</strong>(存储器的逻辑组织和物理组织)<ul><li>由应用程序控制：覆盖；</li><li>由OS控制：交换（整个进程空间），虚拟存储的请求调入和预调入（部分进程空间）</li><li>提高主存利用率</li></ul></li></ol><h2 id="程序的装入和链接">程序的装入和链接</h2><h3 id="程序的装入-重定位-地址映射">程序的装入(重定位)(地址映射)</h3><h4 id="重定位">重定位</h4><ul><li><strong>重定位</strong>: 程序运行装入主存时，要将程序中的虚拟地址转换为主存中的物理地址，这个转化过程就是重定位。</li><li>程序成为进程前的准备工作:<ul><li><strong>编辑</strong>：形成源文件(符号地址)</li><li><strong>编译</strong>：形成目标模块(模块内符号地址解析)</li><li><strong>链接</strong>：由多个目标模块或程序库生成可执行文件(模块间符号地址解析)</li><li><strong>装入</strong>：构造PCB，形成进程(使用物理地址)</li></ul></li></ul><h4 id="重定位方法">重定位方法</h4><h5 id="可重定位装入-静态重定位">可重定位装入(静态重定位)</h5><ul><li>内容<ul><li>编写程序时可以采用相对地址</li><li>作业（用户程序）在装入内存时才确定它的物理地址，并且将相对地址转换为物理地址</li><li>作业一旦装入就不能移动、改变空间或者被换出主存。</li><li>在程序运行之前，由<strong>链接</strong>装入程序进行的一次重定位。</li><li>在程序运行之前已经<strong>完成了逻辑地址到物理地址的转换</strong>(只要完成链接装入)</li></ul></li><li>优点：<strong>不需硬件变换机构</strong>支持，可以装入有限多道程序</li><li>缺点：一个程序通常需要占用连续的内存空间，程序装入内存后<strong>在运行期间不能移动</strong>，不易实现共享。</li></ul><h5 id="动态运行时装入-动态重定位">动态运行时装入(动态重定位)</h5><ul><li>内容<ul><li>动态重定位是在程序<strong>执行的过程</strong>中，每当访问指令或数据时，才将要访问的<strong>指令或数据</strong>的<strong>逻辑地址转换成物理地址</strong>。</li><li>在程序<strong>装入时不对地址做任何操作</strong>，也就是保留逻辑地址不变。</li><li><strong>运行时重定位</strong>：可以使程序载入后还可以移动</li><li>每个进程有各自的<strong>基地址,放在PCB</strong></li></ul></li></ul><h2 id="连续分配方式">连续分配方式</h2><h3 id="分配方式">分配方式</h3><ul><li><p><strong>固定分区</strong>: 把内存划分为若干个固定大小的连续分区。</p><ul><li>分区大小可以相等也可以不同</li><li><strong>固定分区可能存在内碎片</strong></li><li>系统通过<strong>分区说明表</strong>对内存进行管理和控制。</li></ul></li><li><p><strong>动态分区</strong>：在装入程序时按其初始要求分配，或在其执行过程中通过系统调用进行分配或改变分区大小。</p><ul><li>没有内碎片；有外碎片，如果大小不是任意的，也可能出现内碎片。</li><li><strong>内存紧缩</strong>：将空闲分区合并，需要移动多个段(复制内容)：</li></ul></li></ul><h3 id="分区分配数据结构">分区分配数据结构</h3><h4 id="空闲分区表">空闲分区表</h4><ul><li>用于为内存中每个<strong>尚未分配</strong>的分区设置一个表项，每个分区的表项包含<strong>分区序号</strong>、<strong>分区始址</strong>及<strong>分区大小</strong>；</li></ul><h4 id="空闲分区链">空闲分区链</h4><ul><li>通过前、后向指针将所有的分区链接成一个双向链</li></ul><h3 id="分区分配算法">分区分配算法</h3><h4 id="首次适应算法FF">首次适应算法FF</h4><ol><li>内容<br>内存分配时，从<strong>链首开始顺序查找</strong>，直至找到一个能满足其大小要求的空闲分区为止。然后按作业大小划出一块内存空间分配给请求者，余下的空闲分区仍留在空闲链中。</li><li>优点<ul><li>优先利用内存中<strong>低址</strong>部分的空闲分区，在<strong>高址</strong>部分的空闲分区很少被利用，从而保留了高址部分的大空闲区，为后到的大作业分配大的内存空间创造了条件。</li></ul></li><li>缺点<ul><li><strong>低址部分不断被划分</strong>，形成碎片；</li><li>每次查找都从低址部分开始，这<strong>增加了查找可用空闲分区的开销</strong>。</li></ul></li></ol><h4 id="循环首次适应算法">循环首次适应算法</h4><ol><li>内容<ul><li>内存分配时，从<strong>上次找到的空闲分区的下一个空闲分区</strong>开始查找，直至找到第一个能满足要求的空闲分区，并从中划出一块与请求的大小相等的内存空间分配给作业</li><li>设置一起始查寻指针，并采用<strong>循环查找</strong>方式。</li></ul></li><li>优点<ul><li>使内存中的空闲分区分布得更均匀</li><li>减少查找空闲分区的开销</li></ul></li><li>缺点<ul><li>缺乏大的空闲分区</li></ul></li></ol><h4 id="最佳适应算法">最佳适应算法</h4><ol><li>内容<ul><li>“最佳”是指每次为作业分配内存时，总把<strong>既能满足要求</strong>、<strong>又是最小</strong>的空闲分区分配给作业，避免了“大材小用”。</li><li>为了加速寻找，该算法要求将所有的空闲区，<strong>按其大小以递增</strong>的顺序形成<strong>空闲区链</strong>。</li></ul></li></ol><h3 id="分区分配和回收操作">分区分配和回收操作</h3><h4 id="动态分区分配内存">动态分区分配内存</h4><blockquote><ul><li>首先系统要利用某种分配算法，从空闲分区链(表)中找到所需的分区;</li><li>设<strong>请求的分区大小为u.size</strong>，表中每个空闲分区的大小可表示为m.size;</li><li>if(<strong>m.size-u.size&lt;=size</strong>)<br>- // size是事先规定的不再切割的剩余分区的大小<br>- 说明多余部分太小,可不再切割，<strong>将整个分区分配给请求者</strong>;</li><li>else<br>- 从该分区中划分出与请求的大小相等的内存空间分配出去，余下的部分仍留在空闲分区链或空闲分区表中。最后，将分配区的首址返回给调用者;</li></ul></blockquote><h4 id="回收内存">回收内存</h4><h5 id="内存紧缩">内存紧缩</h5><ul><li>内容：将各个占用分区向内存一端移动。使各个空闲分区聚集在另一端，然后将各个空闲分区合并成为一个空闲分区。</li><li>这过程涉及到了<strong>动态重定位</strong></li><li>紧缩时机：每个分区释放后，或内存分配找不到满足条件的空闲分区时</li></ul><h4 id="可重定位分区分配-增加了内存紧凑">可重定位分区分配(增加了内存紧凑)</h4><img src="..\img\OS\动态重定位分区分配算法.png" width="70%" height="70%" align="middle"><h3 id="对换">对换</h3><h4 id="对换的定义">对换的定义</h4><ul><li>指把内存中<strong>暂时不能运行的进程</strong>或者<strong>暂时不用的程序和数据</strong>，调出到<strong>外存</strong>上，以便腾出足够的内存空间，再把已具备运行条件的进程或进程所需要的程序和数据，调入内存</li><li>对换是提高内存利用率的有效措施</li><li>整体对换(进程对换): 对换是以整个进程为单位</li><li>部分对换(页面对换/分段对换): 对换是以“<strong>页</strong>”或“<strong>段</strong>”为单位进行</li><li>为了实现进程对换，系统必须能实现三方面的功能：<ul><li>对换空间的管理</li><li>进程的换出</li><li>进程的换入</li></ul></li></ul><h4 id="对换空间的管理">对换空间的管理</h4><ul><li>数据结构: 空闲分区表或空闲分区链</li><li><strong>空闲分区表</strong>中的每个表目中应<strong>包含两项</strong>， 即<strong>对换区</strong>的<strong>首址</strong>及其<strong>大小</strong>，它们的单位是<strong>盘块号</strong>和<strong>盘块数</strong>。</li></ul><blockquote><p><strong>外存空间分类</strong><br><strong>文件区</strong>：用于<strong>存放文件</strong>，由于通常的文件都是较长久地驻留在外存上，故对文件区管理的主要目标是<strong>提高文件存储空间的利用率</strong>，为此系统采取<strong>离散分配</strong>方式。<br><strong>对换区</strong>：用于<strong>存放从内存换出的进程</strong>，由于这些进程在对换区中驻留的时间是短暂的，而对换操作又较频繁，故对对换空间管理的主要目标是<strong>提高进程的换入、换出速度</strong>，为此所应采取的管理策略是<strong>用连续分配方式</strong>，较少考虑外存中的碎片问题。</p></blockquote><h4 id="进程的换出与换入">进程的换出与换入</h4><h5 id="进程的换出">进程的换出</h5><ul><li>每一进程由于创建子进程而需要更多的内存空间，但又无足够的内存空间等情况发生时，系统应将某进程换出</li><li>换出过程:<ul><li>系统首先选择处于<strong>阻塞状态</strong>且<strong>优先级最低</strong>的进程作为换出进程;</li><li>启动盘块，将该进程的程序和数据传送到磁盘的对换区上;</li><li>若传送过程未出现错误，便可<strong>回收该进程所占用的内存空间</strong>，并对该进程的PCB做相应的修改。</li></ul></li></ul><h5 id="进程的换入">进程的换入</h5><ul><li>系统应<strong>定时地查看</strong>所有进程的状态;</li><li>从中找出“<strong>就绪</strong>”状态但已换出的进程，将其中<strong>换出时间(换出到磁盘上)最久的进程</strong>作为换入进程，将之换入;</li><li>直至已无可换入的进程或无可换出的进程为止。</li></ul><h2 id="离散分配方式">离散分配方式</h2><ul><li>思想：将<strong>一个进程</strong>直接<strong>分散地分配到许多不相邻接的分区中</strong>，就不必再进行“紧凑”。</li><li>离散分配种类：<ul><li>分页存储管理</li><li>分段存储管理</li><li>段页式存储管理</li></ul></li></ul><h2 id="基本分页存储管理方式">基本分页存储管理方式</h2><h3 id="页面和物理块">页面和物理块</h3><ul><li><strong>页面</strong>:<ul><li>将一个进程的<strong>逻辑地址空间</strong>分成若干个<strong>大小相等</strong>的片，称为<strong>页面</strong>或<strong>页</strong>，并为各页加以编号，从0开始，如第0页、第1页等。</li></ul></li><li><strong>物理块(页框)</strong>:<ul><li>把<strong>内存空间</strong>分成与<strong>页面相同大小</strong>的若干个存储块</li></ul></li><li>分配时<strong>主存块可以不连续</strong>; 而<strong>页内逻辑地址是连续的</strong></li><li><strong>分页存储器的逻辑地址</strong>: 页号和页内地址(位移量)<ul><li>假设地址总长度为15位，其中页号占5位，页内地址占10位;那么逻辑地址可有32页，编号为0－31;页内地址占10位，则块的大小为1024个字节。编号为0－1023。</li><li>若给定一个逻辑地址空间中的地址为A，页面的大小为L，则页号P和页内地址d可按下式求得:</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo>=</mo><mi>I</mi><mi>N</mi><mi>T</mi><mo stretchy="false">[</mo><mi>A</mi><mi mathvariant="normal">/</mi><mi>L</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">P=INT[A/L]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">NT</span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mord">/</span><span class="mord mathnormal">L</span><span class="mclose">]</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mo>=</mo><mi>A</mi><mi>m</mi><mi>o</mi><mi>d</mi><mo stretchy="false">(</mo><mi>L</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d=A mod(L)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mclose">)</span></span></span></span></span></p></li></ul><h3 id="页表-地址变换机构">页表(地址变换机构)</h3><ul><li><p>作用：实现<strong>逻辑地址</strong>到<strong>物理地址</strong>的转换(将<strong>逻辑地址中的页号</strong>转换为<strong>内存中的物理块号</strong>)</p></li><li><p>地址转换的公式为：<strong>绝对地址＝块号*块长+页内地址</strong><br><img src="..\img\OS\页表变换地址.png" width="70%" height="70%" align="middle"></p></li><li><p>页表控制寄存器–系统中只有一个</p></li></ul><h3 id="引入快表-TLB-的地址变换机构">引入快表(TLB)的地址变换机构</h3><ul><li>引入原因：由于页表是存放在内存中的，这使CPU每次要存取一个数据时，都要两次访问内存。<ul><li>第一次是访问内存中的<strong>页表</strong>，从中找到该页的物理块号，将此块号与页内偏移量w拼接以形成物理地址</li><li>第二次访问内存时，才是从第一步所得地址中<strong>获得所需数据</strong>(或向此地址中写入数据)</li></ul></li><li>TLB是一组相联快速存储，是寄存器，类似<strong>Cache</strong></li><li><em><em>有效访问时间 = HitR</em>(TLB+MA) + (1-HitR)*(TLB+2MA)</em>*</li><li>原理：<ul><li>程序的地址访问存在局部性</li><li>空间局部性(程序多体现为循环、顺序结构)<br><img src="..\img\OS\具有块表的页表地址变换.png" width="70%" height="70%" align="middle"></li></ul></li></ul><h3 id="两级和多级页表">两级和多级页表</h3><ul><li>引入原因: 现代的大多数计算机系统，都支持非常大的逻辑地址空间。在这样的环境下，页表就变得非常大，要占用相当大的内存空间。并且为连续的。</li><li>解决方法：<ul><li>采用<strong>离散分配方式</strong>来解决难以找到一块连续的大内存空间的问题；</li><li>将<strong>当前需要的部分页表项调入内存</strong>，其余的<strong>页表项驻留在磁盘上</strong>，需要时再调入</li></ul></li></ul><h4 id="两级页表">两级页表</h4><ul><li>将页表也进行分页的办法，使每个页面的大小与内存物理块的大小相同，并为它们进行编号，即依次为0页，1页，…，n页。可以离散地将各个页面分别放在不同的物理块中</li><li>外层页表：为离散分配的页表再建立一张页表，称为外层页表(Outer Page Table)，在每个页表项中记录了页表页面的物理块号。</li></ul><h2 id="基本分段存储管理方式">基本分段存储管理方式</h2><ul><li>引入：为了满足用户和程序员的下述一系列需要：<ul><li><strong>方便编程</strong>：通常采用分段，汇编。。。</li><li><strong>信息共享</strong>：通常，在实现程序和数据的共享时，都是以信息的逻辑单位为基础的；<ul><li>比如，共享某个例程和函数。而在分页系统中的每一页都只是存放信息的物理单位，其本身并无完整的意义，因而不便于实现信息共享；然而段却是信息的逻辑单位。</li></ul></li><li><strong>信息保护</strong></li><li><strong>动态增长</strong></li><li><strong>动态链接</strong></li></ul></li></ul><h3 id="分段">分段</h3><ul><li>内容：<ul><li>作业的地址空间被划分为若干个段，每个段定义了一组逻辑信息。</li><li>将程序的地址空间划分为若干个段(segment)，程序加载时，分配其所需的所有段（内存分区），这些段不必连续；物理内存的管理采用动态分区。需要CPU的硬件支持。</li></ul></li><li>优点：<ul><li>没有内碎片，外碎片可以通过内存紧缩来消除</li><li>便于改变进程占用空间的大小</li></ul></li></ul><h3 id="段表">段表</h3><p>段表实现从逻辑段到物理内存区的映射。<br><img src="..\img\OS\段表变换地址.png" width="70%" height="70%" align="middle"></p><h3 id="分页和分段的主要区别">分页和分段的主要区别</h3><h4 id="相同点">相同点</h4><ul><li>都采用离散分配方式；</li><li>都要通过地址映射机构来实现地址变换</li></ul><h4 id="不同点">不同点</h4><ul><li><strong>分页是出于系统管理</strong>的需要，<strong>分段是出于用户应用</strong>的需要<ul><li>一条指令或一个操作数可能会跨越两个页的分界处，而不会跨越两个段的分界处。</li></ul></li><li>页大小是系统固定的，而段大小则通常不固定</li><li><strong>逻辑地址表示</strong>：<ul><li>分页是一维的，各个模块在链接时必须组织成同一个地址空间；</li><li>分段是二维的，各个模块在链接时可以每个段组织成一个地址空间</li></ul></li><li>通常<strong>段比页大</strong>，因而段表比页表短，可以缩短查找时间，提高访问速度。</li><li>分页系统能有效地<strong>提高内存利用率</strong>，而分段系统则能很好地<strong>满足用户需要</strong>。</li></ul><h2 id="段页式存储管理方式">段页式存储管理方式</h2><h3 id="优点：">优点：</h3><ul><li>段页式既具有分段系统<strong>便于实现、分段可共享、易于保护、可动态链接</strong>等一系列优点；</li><li>也具有分页系统那样很好地<strong>解决内存的外部碎片问题</strong>，以及为各个分段<strong>可离散地</strong>分配内存等问题</li></ul><h3 id="基本原理">基本原理</h3><p>把用户程序分成若干段，再把每个段分成若干页<br><img src="..\img\OS\段页式地址变换.png" width="70%" height="70%" align="middle"></p><ul><li>在段页式系统中，为了获取一条指令或数据，须3次访问内存。<ul><li>第一次：访问内存中的段表，从中取得页表地址；</li><li>第二次：访问内存中的页表，从中取出该页所在的物    理块号，同时和页内地址相加求出物理地址；</li><li>第三次：从地址中取出指令或数据；</li></ul></li></ul><h2 id="虚拟存储器的基本概念">虚拟存储器的基本概念</h2><ul><li>引入原因：<ul><li>作业很大：<br>其所要求的内存空间超过了内存总容量，作业不能全部被装入内存，致使该作业无法运行；</li><li>大量作业要求运行：<br>但由于内存容量不足以容纳所有这些作业，只能将少数作业装入内存让它们先运行，而将其它大量的作业留在外存上等待。</li></ul></li><li>解决方法：<ul><li>从<strong>物理上</strong>增加内存容量。</li><li>从<strong>逻辑上</strong>扩充内存容量。这正是<strong>虚拟存储技术</strong>所要解决的主要问题。</li></ul></li></ul><h3 id="定义-2">定义</h3><ul><li>所谓<strong>虚拟存储器</strong>，是指具有<strong>请求调入功能</strong>和<strong>置换功能</strong>，能从<strong>逻辑上</strong>对<strong>内存容量加以扩充</strong>的一种存储器系统。</li><li>其<strong>逻辑容量</strong>受限于计算机的<strong>地址结构</strong>和<strong>可用磁盘容量</strong>，其运行速度<strong>接近于内存速度</strong>。</li></ul><h3 id="基本原理-2">基本原理</h3><ul><li>在程序装入时，不必将其全部读入到内存，而只需<strong>将当前需要执行的部分页或段读入到内存</strong>，就可让程序开始执行。</li><li>在程序执行过程中，如果需执行的指令或访问的数据尚未在内存（称为<strong>缺页或缺段</strong>），则由处理器通知操作系统将相应的页或段<strong>调入到内存</strong>，然后继续执行程序。</li><li>另一方面，操作系统将内存中<strong>暂时不使用的页或段调出保存在外存</strong>上，从而腾出空间存放将要装入的程序以及将要调入的页或段。只需程序的一部分在内存就可执行。</li></ul><h3 id="优点">优点</h3><ul><li><strong>大程序</strong>：可在较小的可用内存中执行较大的用户程序；</li><li><strong>大的用户空间</strong>：提供给用户可用的虚拟内存空间通常大于物理内存(real memory)</li><li><strong>并发</strong>：可在内存中容纳更多程序并发执行；</li><li><strong>易于开发</strong>：与覆盖技术比较，不必影响编程时的程序结构</li></ul><h3 id="实现方式">实现方式</h3><ul><li>虚拟存储器的实现，是建立在<strong>离散分配</strong>的存储管理方式基础上</li><li>常见方法有：<ul><li>分页请求系统</li><li>分段请求系统</li></ul></li></ul><h2 id="请求分页存储管理方式">请求分页存储管理方式</h2><h2 id="页面置换算法">页面置换算法</h2><h2 id="请求分段存储管理方式">请求分段存储管理方式</h2><h1>I/O设备管理</h1><h1>文件管理</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;操作系统概述&lt;/h1&gt;
&lt;h2 id=&quot;操作系统定义&quot;&gt;操作系统定义&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;操作系统&lt;/strong&gt;：是管理计算机系统资源、控制程序执行、改善人机界面和为应用软件提供支持的一种系统&lt;font color=red&gt;软件&lt;/font&gt;。&lt;/p&gt;
&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Unity-Resources资源动态加载</title>
    <link href="https://escapeey.github.io/post/d86321cd.html"/>
    <id>https://escapeey.github.io/post/d86321cd.html</id>
    <published>2023-10-31T09:27:38.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h2 id="特殊文件夹">特殊文件夹</h2><h3 id="工程路径获取">工程路径获取</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.dataPath);</span><br></pre></td></tr></table></figure><ul><li>注意 该方式 获取到的路径 一般情况下 只在 编辑模式下使用</li><li>我们不会在实际发布游戏后 还使用该路径</li><li>游戏发布过后 该路径就不存在了</li></ul><h3 id="Resources-资源文件夹">Resources 资源文件夹</h3><ul><li>路径获取：<ul><li>一般不获取<br>只能使用Resources相关API进行加载</li><li>如果硬要获取 可以用工程路径拼接</li></ul>  <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.dataPath + <span class="string">&quot;/Resources&quot;</span>);</span><br></pre></td></tr></table></figure></li><li>注意：<br>该文件夹需要我们自己创建</li><li>作用：资源文件夹<ul><li>需要通过Resources相关API动态加载的资源需要放在其中</li><li>该文件夹下所有文件都会被打包出去</li><li>打包时Unity会对其压缩加密</li><li>该文件夹打包后<font color=red>只读</font> 只能通过Resources相关API加载</li></ul></li></ul><h3 id="StreamingAssets-流动资源文件夹">StreamingAssets 流动资源文件夹</h3><ul><li>路径获取：</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.streamingAssetsPath);</span><br></pre></td></tr></table></figure><ul><li>注意：<br>需要我们自己将创建</li><li>作用：流文件夹<ul><li>打包出去不会被压缩加密，可以任由我们摆布</li><li>移动平台<font color=red>只读</font>，PC平台<font color=red>可读可写</font></li><li>可以放入一些需要自定义动态加载的初始资源</li></ul></li></ul><h3 id="persistentDataPath-持久数据文件夹">persistentDataPath 持久数据文件夹</h3><ul><li>路径获取：</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.persistentDataPath);</span><br></pre></td></tr></table></figure><ul><li>注意：<br>不需要我们自己将创建</li><li>作用：固定数据文件夹<ul><li>所有平台都<font color=red>可读可写</font></li><li>一般用于放置动态下载或者动态创建的文件，游戏中创建或者获取的文件都放在其中</li></ul></li></ul><h3 id="Plugins-插件文件夹">Plugins 插件文件夹</h3><ul><li>路径获取：一般不获取</li><li>注意：<br>需要我们自己将创建</li><li>作用：插件文件夹<ul><li>不同平台的插件相关文件放在其中比如IOS和Android平台</li></ul></li></ul><h3 id="Editor-编辑器文件夹">Editor 编辑器文件夹</h3><ul><li>路径获取：<ul><li>一般不获取</li><li>如果硬要获取 可以用工程路径拼接</li></ul>  <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(Application.dataPath + <span class="string">&quot;/Editor&quot;</span>);</span><br></pre></td></tr></table></figure></li><li>注意：需要我们自己将创建</li><li>作用：编辑器文件夹<ul><li>开发Unity编辑器时，编辑器相关脚本放在该文件夹中</li><li>该文件夹中内容不会被打包出去</li></ul></li></ul><h3 id="默认资源文件夹-Standard-Assets">默认资源文件夹 Standard Assets</h3><ul><li>路劲过去：一般不获取</li><li>注意：需要我们自己将创建</li><li>作用：默认资源文件夹<ul><li>一般Unity自带资源都放在这个文件夹下</li><li>代码和资源优先被编译</li></ul></li></ul><h2 id="Resources资源动态加载">Resources资源动态加载</h2><h3 id="作用">作用</h3><ul><li>通过代码动态加载<strong>Resources</strong>文件夹下指定路径资源</li><li>避免繁琐的拖曳操作</li></ul><h3 id="常用资源类型">常用资源类型</h3><ul><li>预设体对象——<code>GameObject</code></li><li>音效文件——<code>AudioClip</code></li><li>文本文件——<code>TextAsset</code></li><li>图片文件——<code>Texture</code></li><li>其它类型——需要什么用什么类型</li><li>注意：<br>预设体对象加载需要实例化<br>其它资源加载一般直接用</li></ul><h2 id="Resources资源同步加载">Resources资源同步加载</h2><h3 id="同步加载-普通方法">同步加载(普通方法)</h3><p>使用<code>Resources.Load()</code>方法加载预设体的资源文件<font color="red">(本质上 是加载 配置数据 到内存中)</font></p><h4 id="预设体对象">预设体对象</h4><ul><li><font color="red">需要实例化</font></li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object obj = Resources.Load(<span class="string">&quot;Cube&quot;</span>);</span><br><span class="line">Instantiate(obj);</span><br></pre></td></tr></table></figure><h4 id="音效资源">音效资源</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AudioSource audioS;</span><br><span class="line">audioS.clip = Resource.Load(<span class="string">&quot;Music/BKMusic&quot;</span>) <span class="keyword">as</span> AudioClip;</span><br><span class="line">audioS.Play();</span><br></pre></td></tr></table></figure><h4 id="文本资源">文本资源</h4><p>支持的格式<font color='blue'>.txt, .xml, .bytes, .json, .html, .csv, …</font></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TextAsset ta = Resouces.Load(<span class="string">&quot;Txt/Test&quot;</span>) <span class="keyword">as</span> TextAsset;</span><br><span class="line"><span class="comment">//文本内容</span></span><br><span class="line">print(ta.text);</span><br><span class="line"><span class="comment">//字节数据组</span></span><br><span class="line">print(ta.bytes);</span><br></pre></td></tr></table></figure><h4 id="图片">图片</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Texture tex;</span><br><span class="line">tex = Resources.Load(<span class="string">&quot;Tex/TestJPG&quot;</span>) <span class="keyword">as</span> Texture;</span><br></pre></td></tr></table></figure><h4 id="问题">问题</h4><p>若资源同名时怎么办，因为同一个文件夹中不同格式的文件可以同名</p><ul><li>方法一：加载指定类型的资源</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tex = Resources.Load(<span class="string">&quot;Tex/TestJPG&quot;</span>, <span class="keyword">typeof</span>(TextAsset)) <span class="keyword">as</span> TextAsset;</span><br></pre></td></tr></table></figure><ul><li>方法二：加载指定名字的所有资源</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Object[] objs = Resources.LoadAll(<span class="string">&quot;Tex/TestJPG&quot;</span>);</span><br><span class="line"><span class="keyword">foreach</span> (Object item <span class="keyword">in</span> objs)&#123;</span><br><span class="line">    <span class="keyword">if</span> (item <span class="keyword">is</span> Texture)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(item <span class="keyword">is</span> TextAsset)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="同步加载-泛型方法">同步加载(泛型方法)</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TextAsset ta = Resources.Load&lt;TextAsset&gt;(<span class="string">&quot;Test&quot;</span>);</span><br><span class="line">Texture tex = Resouces.Load&lt;Texture&gt;(<span class="string">&quot;Test&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="Resources资源异步加载">Resources资源异步加载</h2><h3 id="什么是Resources异步加载">什么是Resources异步加载</h3><p>同步加载过大的资源可能会造成程序卡顿//<br>异步加载是内部新开一个线程进行资源加载 不会造成主线程卡顿</p><h3 id="Resources异步加载方法">Resources异步加载方法</h3><p><strong>使用<code>Resources.LoadAsync()</code>方法</strong><br>异步加载 不能马上得到加载的资源 <strong>至少要<font color='red'>等一帧</font></strong></p><h4 id="完成事件监听异步加载">完成事件监听异步加载</h4><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ResourceRequest rq = Resources.LoadAsync&lt;Texture&gt;(<span class="string">&quot;Tex/TestJPG&quot;</span>);</span><br><span class="line"><span class="comment">//进行一个 资源下载结束 的一个事件函数监听(当资源加载结束后自动调用事件)</span></span><br><span class="line">rq.completed += LoadOver;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">LoadOver</span>(<span class="params">AsyncOperation rq</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    print(<span class="string">&quot;加载结束&quot;</span>);</span><br><span class="line">    <span class="comment">//asset 是资源对象 加载完毕过后 就能够得到它</span></span><br><span class="line">    tex = (rq <span class="keyword">as</span> ResourceRequest).asset <span class="keyword">as</span> Texture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="..\img\Unity\AsyncOperation类.png" width="50%" height="50%"><img src="..\img\Unity\ResourceRequest类.png" width="50%" height="50%"><h4 id="协程异步加载">协程异步加载</h4><h5 id="协程回顾">协程回顾</h5><ul><li>两大关键<ul><li>迭代器函数 (自己写)</li><li>协程协调器 (Unity自带)</li></ul></li><li><strong>迭代器函数</strong>当遇到<code>yield return</code>时就会停止执行之后的代码;<br>然后<strong>协程协调器</strong>通过得到<strong>返回的值</strong>去判断下一次执行后面的步骤<strong>将会是何时</strong></li></ul><h5 id="协程异步加载-2">协程异步加载</h5><ol><li>使用<code>yield return rq;</code>时Unity 会自己判断 该资源是否加载完毕了; 加载完毕过后 才会继续执行后面的代码.</li></ol><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">StartCoroutine(Load1());</span><br><span class="line"></span><br><span class="line"><span class="function">IEnumerator <span class="title">Load1</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    ResourceRequest rq = Resources.LoadAsync(<span class="string">&quot;Tex/TestJPG&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> rq;</span><br><span class="line">    tex = rq.asset <span class="keyword">as</span> Texture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>使用<code>rq.isDone</code>判断是否加载结束</li></ol><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">StartCoroutine(Load2());</span><br><span class="line"></span><br><span class="line"><span class="function">IEnumerator <span class="title">Load2</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//加载两个资源</span></span><br><span class="line">    ResourceRequest rq1 = Resources.LoadAsync(<span class="string">&quot;Tex/TestJPG1&quot;</span>);</span><br><span class="line">    ResourceRequest rq2 = Resources.LoadAsync(<span class="string">&quot;Tex/TestJPG2&quot;</span>);</span><br><span class="line">    <span class="comment">//判断资源是否加载结束</span></span><br><span class="line">    <span class="keyword">while</span>(!rq1.isDone || !rq2.isDone)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//打印当前的 加载进度 </span></span><br><span class="line">        <span class="comment">//该进度 不会特别准确 过渡也不是特别明显</span></span><br><span class="line">        print(rq1.progress);</span><br><span class="line">        print(rq2.progress);</span><br><span class="line">        <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    tex1 = rq1.asset <span class="keyword">as</span> Texture;</span><br><span class="line">    tex2 = rq2.asset <span class="keyword">as</span> Texture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="总结">总结</h3><h4 id="完成事件监听异步加载-2">完成事件监听异步加载</h4><ul><li><font color='red'>我们在只加载一个资源时使用</font></li><li>好处：写法简单</li><li>坏处：只能在资源加载结束后 进行处理</li><li>“线性加载”</li></ul><h4 id="协程异步加载-3">协程异步加载</h4><ul><li><font color='red'>我们在加载多个资源时使用</font></li><li>好处：可以在协程中处理复杂逻辑，比如<strong>同时加载多个资源</strong>，比如进度条更新</li><li>坏处：写法稍麻烦</li><li>“并行加载”</li></ul><h4 id="注意：">注意：</h4><ul><li>理解为什么异步加载不能马上加载结束，为什么至少要等1帧</li><li>理解协程异步加载的原理</li></ul><h2 id="Resources资源卸载">Resources资源卸载</h2><h3 id="Resources重复加载资源会浪费内存吗？">Resources重复加载资源会浪费内存吗？</h3><ul><li>在Resources加载一次资源过后该资源就一直存放在内存中作为缓存，第二次加载时发现缓存中存在该资源，会直接取出来进行使用，所以<strong>多次重复加载不会浪费内存</strong></li><li>但是 <strong>会浪费性能</strong>(每次加载都会去查找取出，始终伴随一些性能消耗)</li></ul><h3 id="手动释放掉缓存中的资源">手动释放掉缓存中的资源</h3><h4 id="卸载指定资源">卸载指定资源</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">注意：</span><br><span class="line">- 该方法 不能释放 ```GameObject```对象 因为它会用于实例化对象</span><br><span class="line">- 它只能用于一些 **不需要实例化的内容** 比如 图片 和 音效 文本等等</span><br><span class="line">- **一般情况下 我们很少单独使用它**</span><br><span class="line">``` C# </span><br><span class="line">Resources.UnloadAsset(tex);</span><br></pre></td></tr></table></figure><h4 id="卸载未使用的资源">卸载未使用的资源</h4><ul><li>注意：<strong>一般在过场景时和GC一起使用</strong></li></ul><pre><code class="language-C#">Resources.UnloadUnusedAssets();GC.Collect();</code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;特殊文件夹&quot;&gt;特殊文件夹&lt;/h2&gt;
&lt;h3 id=&quot;工程路径获取&quot;&gt;工程路径获取&lt;/h3&gt;
&lt;figure class=&quot;highlight c#&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/</summary>
      
    
    
    
    <category term="Unity" scheme="https://escapeey.github.io/categories/Unity/"/>
    
    
    <category term="C#" scheme="https://escapeey.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Unity-协同程序</title>
    <link href="https://escapeey.github.io/post/2befdcf2.html"/>
    <id>https://escapeey.github.io/post/2befdcf2.html</id>
    <published>2023-10-26T17:25:37.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Unity是否支持多线程？">Unity是否支持多线程？</h2><ul><li>Unity是支持多线程的, 只是新开线程<font color="red">无法访问Unity相关对象的内容</font></li><li>注意：Unity中的多线程要记住关闭，否则即使停止运行主线程新开线程也会继续运行</li></ul><h2 id="协同程序是什么？">协同程序是什么？</h2><ul><li>协同程序简称协程，它是“假”的多线程，它不是多线它的主要作用</li><li>将代码分时执行，不卡主线程<ul><li>简单理解，是把可能会让主线程卡顿的耗时的分步执</li></ul></li><li>主要使用场景<ul><li>异步加载文件</li><li>异步下载文件</li><li>场景异步加载</li><li>批量创建时防止卡顿</li></ul></li></ul><h2 id="协同程序和线程的区别">协同程序和线程的区别</h2><ul><li>新开一个线程是独立的一个管道，和主线程并行执行</li><li>新开一个协程是在原线程之上开启，进行逻辑分时分步执行</li></ul><h2 id="协程的使用">协程的使用</h2><ul><li>继承MonoBehavior的类 都可以开启 协程函数</li></ul><h3 id="第一步：申明协程函数">第一步：申明协程函数</h3><ul><li>协程函数2个关键点<ul><li>1-1返回值为IEnumerator类型及其子类</li><li>1-2函数中通过 yield return 返回值;</li></ul></li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关键点一： 协同程序（协程）函数 返回值 必须是 IEnumerator或者继承它的类型 </span></span><br><span class="line"><span class="function">IEnumerator <span class="title">MyCoroutine</span>(<span class="params"><span class="built_in">int</span> i, <span class="built_in">string</span> str</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    print(i);</span><br><span class="line">    <span class="comment">//关键点二： 协程函数当中 必须使用 yield return 进行返回</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    print(str);</span><br><span class="line">    <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">1f</span></span>)</span>;</span><br><span class="line">    print(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForFixedUpdate</span>()</span>;</span><br><span class="line">    print(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">    <span class="comment">//主要会用来截图时会使用，保证画面完整正常</span></span><br><span class="line">    <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForEndOfFrame</span>()</span>;</span><br><span class="line">    <span class="comment">//可以写死循环，不会卡死主线程</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">        <span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params"><span class="number">5f</span></span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第二步：开启协程函数">第二步：开启协程函数</h3><ul><li>这样执行没有任何效果</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MyCoroutine(<span class="number">1</span>, <span class="string">&quot;123&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>常用开启方式</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IEnumerator ie = MyCoroutine(<span class="number">1</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line">StartCoroutine(ie);</span><br></pre></td></tr></table></figure><h3 id="第三步：关闭协程">第三步：关闭协程</h3><ul><li>关闭所有协程</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StopAllCoroutines();</span><br></pre></td></tr></table></figure><ul><li>关闭指定协程</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Coroutine c1 = StartCoroutine(MyCoroutine(<span class="number">1</span>,<span class="string">&quot;123&quot;</span>));</span><br><span class="line">StopCoroutine(c1);</span><br></pre></td></tr></table></figure><h2 id="yield-return-不同内容的含义">yield return 不同内容的含义</h2><h3 id="下一帧执行">下一帧执行</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">yield</span> <span class="keyword">return</span> 数字;</span><br><span class="line"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><ul><li>在Update和LateUpdate之间执行</li></ul><h3 id="等待指定秒后执行">等待指定秒后执行</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForSeconds</span>(<span class="params">second</span>)</span>;</span><br></pre></td></tr></table></figure><ul><li>在Update和LateUpdate之间执行</li></ul><h3 id="等待下一个固定物理帧更新时执行">等待下一个固定物理帧更新时执行</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForFixedUpdate</span>()</span>;</span><br></pre></td></tr></table></figure><ul><li>在FixedUpdate和碰撞检测相关函数之后执行</li></ul><h3 id="等待摄像机和GUI渲染完成后执行">等待摄像机和GUI渲染完成后执行</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">yield</span> <span class="keyword">return</span> <span class="keyword">new</span> <span class="title">WaitForEndOfFrame</span>()</span>;</span><br></pre></td></tr></table></figure><ul><li>在LateUpdate之后的渲染相关处理完毕后之执行</li></ul><h3 id="一些特殊类型的对象-比如异步加载相关函对象">一些特殊类型的对象 比如异步加载相关函对象</h3><ul><li>之后讲解：异步加载资源、异步加载场景、网络加载时讲解</li><li>一般在Update和LateUpdate之间执</li></ul><h3 id="跳出协程">跳出协程</h3><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">yield</span> <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure><h2 id="协程受对象和组件失活销毁的影响">协程受对象和组件失活销毁的影响</h2><ul><li>协程开启后<ul><li>组件和物体销毁，协程<font color="red">不执行</font></li><li>物体失活协程<font color="red">不执行</font>，组件失活协程<font color="red">执行</font></li></ul></li><li>与延迟函数相比 延迟函数：<ul><li>组件和物体销毁，延迟函数<font color="red">不执行</font></li><li>物体失活延迟函数<font color="red">执行</font>，组件失活延迟函数<font color="red">执行</font></li></ul></li></ul><h2 id="协程的本质">协程的本质</h2><ul><li>协程可以分成两部分<ul><li>协程函数本体<br>协程本体就是一个能够中间暂停返回的函数,本质上就是一个 C#的迭代器方法</li><li>协程调度器<br>协程调度器是Unity内部实现的，会在对应的时机帮助我们继续执行协程函数</li></ul></li><li>Unity只实现了协程调度部分</li></ul><h3 id="理解">理解</h3><ul><li><p>C#看到迭代器函数和yield return 语法糖就会把原本是一个的 函数变成&quot;几部分&quot;<br>我们可以通过迭代器  从上到下遍历这 &quot;几部分&quot;进行执行  就达到了将一个函数中的逻辑分时执行的目的</p></li><li><p>而协程调度器就是 利用迭代器函数返回的内容来进行之后的处理<br>比如Unity中的协程调度器 根据yield return 返回的内容 决定了下一次在何时继续执行迭代器函数中的&quot;下一部分&quot;</p></li><li><p>理论上来说 我们可以利用迭代器函数的特点 自己实现协程调度器来取代Unity自带的调度器</p></li></ul><h2 id="例子：使用协程避免批量加载物体时卡顿">例子：使用协程避免批量加载物体时卡顿</h2><p>问题：请在场景中创建100000各随机位置的立方体，让其不会明显卡顿<br>分析：如果在同一帧中同时创建100000个物体，会超出1帧的时间，让玩家感到明显卡顿；<br>此时可以使用协程分不同帧分批次创建，例如每帧创建1000个，可减少卡顿。</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">IEnumerator <span class="title">CreateCube</span>(<span class="params"><span class="built_in">int</span> num</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>; i&lt;num; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        GameObject obj = GameObject.CreatePrimitive(Primitive.Cube);</span><br><span class="line">        obj.transform.position = <span class="keyword">new</span> Vector3(Random.Range(<span class="number">-100</span>, <span class="number">100</span>),Random.Range(<span class="number">-100</span>, <span class="number">100</span>),Random.Range(<span class="number">-100</span>, <span class="number">100</span>));</span><br><span class="line">        <span class="keyword">if</span>(i % <span class="number">1000</span> == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结">总结</h2><ol><li>Unity支持多线程，只是新开线程无法访问主线程中Unity相关内容<ul><li>一般主要用于进行复杂逻辑运算或者网络消息接收等等</li><li>注意：Unity中的多线程一定记住关闭</li></ul></li><li>协同程序不是多线程，它是将线程中逻辑进行分时执行，避免卡顿</li><li>继承MonoBehavior的类都可以使用协程</li><li>开启协程方法、关闭协程方法</li><li>yield return 返回的内容对于我们的意义</li><li>协程只有当组件单独失活时不受影响，其它情况协程会停止</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Unity是否支持多线程？&quot;&gt;Unity是否支持多线程？&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Unity是支持多线程的, 只是新开线程&lt;font color=&quot;red&quot;&gt;无法访问Unity相关对象的内容&lt;/font&gt;&lt;/li&gt;
&lt;li&gt;注意：Unity中的多线程要记住关闭</summary>
      
    
    
    
    <category term="Unity" scheme="https://escapeey.github.io/categories/Unity/"/>
    
    
    <category term="C#" scheme="https://escapeey.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>计算机网络</title>
    <link href="https://escapeey.github.io/post/e255a10a.html"/>
    <id>https://escapeey.github.io/post/e255a10a.html</id>
    <published>2023-10-24T15:54:11.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>HMM隐马尔可夫模型</title>
    <link href="https://escapeey.github.io/post/1cf48c7a.html"/>
    <id>https://escapeey.github.io/post/1cf48c7a.html</id>
    <published>2023-10-24T08:04:56.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h2 id="HMM隐马尔可夫模型">HMM隐马尔可夫模型</h2><h3 id="观察序列与观察值">观察序列与观察值</h3><ul><li>时间序列：某些应用中，识别对象是一个动态的过程，无法用静态的矢量描述<ul><li>这些动态过程往往与时间相关，一般采用时间序列来描述</li></ul></li><li>观察序列：识别对象（样本）需要用一个长度为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>的观察序列来描述</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>V</mi><mi>T</mi></msup><mo>=</mo><msub><mi>v</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>v</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">V^T=v_1,v_2,\dots,v_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8913em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><ul><li>观察值：观察序列中的元素<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">v_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>对应时刻<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>的观察值，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">t=1,\dots,T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span><ul><li>观察值描述了时刻<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>的特征，一般用一个特征矢量描述</li><li>语音信号，一般用一个采样帧的频谱特征作为观察矢量</li><li>视频信号，可以用每一帧图像的特征作为观察矢量</li></ul></li></ul><h3 id="一阶Markov模型">一阶Markov模型</h3><h4 id="状态序列">状态序列</h4><ul><li>M个状态 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>w</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">w_1,\dots,w_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li>时刻<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>,模型处于状态<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span>,并发生一次状态转移<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>−</mo><mo>&gt;</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(t)-&gt;w(t+1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></li><li>经过<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>个状态，得到状态转移序列</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>W</mi><mi>T</mi></msup><mo>=</mo><mi>w</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>…</mo><mi>w</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">W^T=w(1)\dots w(T)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8913em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span></span></span></span></p><h4 id="两个规定">两个规定</h4><ul><li>模型在时刻<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>处于状态<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">w(t)=w_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>的概率完全由<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6984em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>时刻的状态<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w(t-1)=w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>决定，与之前及以后的其他状态无关</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><msup><mi>W</mi><mi>T</mi></msup><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mi>w</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(w(t)|W^T) = P(w(t)|w(1),\dots,w(T))=P(w(t)|w(t-1))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">))</span></span></span></span></span></p><ul><li>由状态<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>转移到<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">w_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>的概率，与时刻<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>无关。</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mi>j</mi></msub><mi mathvariant="normal">∣</mi><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P(w(t)=w_j|w(t-1)=w_i) = a_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></p><h4 id="模型参数">模型参数</h4><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>θ</mi><mo>=</mo><mo stretchy="false">(</mo><mi>π</mi><mo separator="true">,</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta=(\pi,A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span></span></p><ul><li>模型初始位于状态<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的概率用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\pi_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>π</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>π</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>π</mi><mi>M</mi></msub><msup><mo stretchy="false">)</mo><mi>t</mi></msup></mrow><annotation encoding="application/x-tex">\pi=(\pi_1,\dots,\pi_M)^t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0936em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8436em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li>状态转移概率矩阵：</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>11</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>12</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>1</mn><mi>M</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>21</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>22</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mn>2</mn><mi>M</mi></mrow></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋱</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>M</mi><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>M</mi><mn>2</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mrow><mi>M</mi><mi>M</mi></mrow></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><annotation encoding="application/x-tex">\begin{bmatrix}a_{11}&amp;a_{12}&amp;\cdots&amp;a_{1M}\\a_{21}&amp;a_{22}&amp;\cdots&amp;a_{2M}\\\vdots&amp;\vdots&amp;\ddots&amp;\vdots\\a_{M1}&amp;a_{M2}&amp;\cdots&amp;a_{MM}\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.46em;vertical-align:-2.48em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:7.4em;"></span><span style="width:0.667em;height:5.400em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='5.400em' viewBox='0 0 667 5400'><path d='M403 1759 V84 H666 V0 H319 V1759 v1800 v1759 h347 v-84H403z M403 1759 V0 H319 V1759 v1800 v1759 h84z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">21</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.64em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span><span style="top:-4.44em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span><span style="top:-2.58em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋱</span></span></span><span style="top:-1.38em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">MM</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:7.4em;"></span><span style="width:0.667em;height:5.400em;"><svg xmlns="http://www.w3.org/2000/svg" width='0.667em' height='5.400em' viewBox='0 0 667 5400'><path d='M347 1759 V0 H0 V84 H263 V1759 v1800 v1759 H0 v84 H347zM347 1759 V0 H263 V1759 v1800 v1759 h84z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><h4 id="一阶Markov模型输出状态序列的概率">一阶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>a</mi><mi>r</mi><mi>k</mi><mi>o</mi><mi>v</mi></mrow><annotation encoding="application/x-tex">Markov</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>模型输出状态序列的概率</h4><ul><li>给定参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>=</mo><mo stretchy="false">(</mo><mi>π</mi><mo separator="true">,</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta=(\pi,A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span>,可以很容易地计算一阶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>a</mi><mi>r</mi><mi>k</mi><mi>o</mi><mi>v</mi></mrow><annotation encoding="application/x-tex">Markov</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>模型输出特定状态转移序列的概率</li><li>模型输出状态序列的概率可以由初始状态概率与各次状态<br>转移概率相乘得到</li><li>例如，模型输出序列 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>𝑊</mi><mn>5</mn></msup><mo>=</mo><msub><mi>𝑤</mi><mn>1</mn></msub><msub><mi>𝑤</mi><mn>1</mn></msub><msub><mi>𝑤</mi><mn>3</mn></msub><msub><mi>𝑤</mi><mn>1</mn></msub><msub><mi>𝑤</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">𝑊^5 = 𝑤_1𝑤_1𝑤_3𝑤_1𝑤_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的概率：</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>𝑃</mi><mo stretchy="false">(</mo><msup><mi>𝑊</mi><mn>5</mn></msup><mo stretchy="false">)</mo><mo>=</mo><msub><mtext>𝜋</mtext><mn>1</mn></msub><msub><mi>𝑎</mi><mn>11</mn></msub><msub><mi>𝑎</mi><mn>13</mn></msub><msub><mi>𝑎</mi><mn>31</mn></msub><msub><mi>𝑎</mi><mn>12</mn></msub></mrow><annotation encoding="application/x-tex">𝑃(𝑊^5) = 𝜋_1𝑎_{11}𝑎_{13}𝑎_{31}𝑎_{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord">𝜋</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">13</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">31</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><h4 id="一阶Markov模型在时刻t的状态概率𝑃-w-t-𝑤-𝑖">一阶<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>a</mi><mi>r</mi><mi>k</mi><mi>o</mi><mi>v</mi></mrow><annotation encoding="application/x-tex">Markov</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>模型在时刻<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>的状态概率<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝑃</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>𝑤</mi><mi>𝑖</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">𝑃(w(t)=𝑤_𝑖)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></h4><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mi>j</mi></msub><mo stretchy="false">)</mo><msub><mi>a</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub></mrow></mrow><annotation encoding="application/x-tex">P(w(t)=w_i)=\sum\limits^N_{j=1}{P(w(t-1)=w_j)a_{ji}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.2421em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ji</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><h3 id="HMM：Hidden-Markov-Model">HMM：Hidden Markov Model</h3><ul><li>HMM 包含一个一阶 Markov 模型，但模型的状态以及状态<br>转移过程是隐含的，不可见的</li><li>HMM 在时刻<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>由隐状态 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span> 输出观察值 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>∈</mo><mo stretchy="false">{</mo><msub><mi>𝑣</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>𝑣</mi><mi>K</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">w(t)∈ \{𝑣_1,\dots, 𝑣_K\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></li><li>经过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝑇</mi></mrow><annotation encoding="application/x-tex">𝑇</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> 个时刻之后，可以观察到 HMM 输出一个观察序列：</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>𝑉</mi><mi>T</mi></msup><mo>=</mo><mi>𝑣</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mi>𝑣</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><mo>…</mo><mi>𝑣</mi><mo stretchy="false">(</mo><mi>𝑇</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">𝑉^T = 𝑣(1)𝑣(2)\dots𝑣(𝑇)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8913em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span></span></span></span></p><h4 id="三个假设">三个假设</h4><ul><li>对于一个随机事件，有一个观察值序列：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝑣</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>𝑣</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">𝑣_1,\dots, 𝑣_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li>该事件隐含着一个状态序列<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝑤</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>𝑤</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">𝑤_1,\dots,𝑤_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li><li>假设1：马尔可夫假设（状态构成一阶马尔可夫链）</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>𝑃</mi><mi>𝑃</mi><mo stretchy="false">(</mo><msub><mi>𝑤</mi><mi>𝑖</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>𝑤</mi><mrow><mi>𝑖</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>…</mo><msub><mi>𝑤</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mi>𝑃</mi><mo stretchy="false">(</mo><msub><mi>𝑤</mi><mi>𝑖</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>𝑤</mi><mrow><mi>𝑖</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">𝑃𝑃(𝑤_𝑖|𝑤_{𝑖−1}\dots 𝑤_1) = 𝑃(𝑤_𝑖|𝑤_{𝑖−1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">PP</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><ul><li>假设2：不动性假设（状态转移概率与具体时间无关）</li><li>假设3：输出独立性假设（输出仅与当前状态有关）</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>𝑃</mi><mo stretchy="false">(</mo><msub><mi>𝑣</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>𝑣</mi><mi>𝑇</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>𝑤</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>𝑤</mi><mi>𝑇</mi></msub><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∏</mo><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mi>T</mi></munderover><mi>P</mi><mo stretchy="false">(</mo><msub><mi>𝑣</mi><mi>𝑡</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>𝑤</mi><mi>𝑡</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">𝑃(𝑣_1,\dots,𝑣_𝑇|𝑤_1,\dots, 𝑤_𝑇)=\prod\limits_{t=1}^TP(𝑣_𝑡|𝑤_𝑡)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.0954em;vertical-align:-1.2671em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8829em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2671em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><h4 id="模型参数-theta-pi-A-B">模型参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>=</mo><mo stretchy="false">(</mo><mi>π</mi><mo separator="true">,</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta=(\pi,A,B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">)</span></span></span></span></h4><ul><li>初始状态概率：𝜋𝜋，𝑀𝑀 维矢量</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>π</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>π</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>π</mi><mi>M</mi></msub><msup><mo stretchy="false">)</mo><mi>t</mi></msup></mrow><annotation encoding="application/x-tex">\pi=(\pi_1,\dots,\pi_M)^t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0936em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8436em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li>状态转移概率矩阵：𝐴𝐴，𝑀𝑀 ×𝑀𝑀 维矩阵<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mo stretchy="false">)</mo><mrow><mi>M</mi><mi>x</mi><mi>M</mi></mrow></msub></mrow><annotation encoding="application/x-tex">A=(a_{ij})_{MxM}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mi>j</mi></msub><mi mathvariant="normal">∣</mi><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a_{ij}=P(w(t)=w_j|w(t-1)=w_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li><li>输出概率矩阵：𝐵𝐵，𝑀𝑀 × 𝐾𝐾 维矩阵<ul><li>M为状态数，K为观测值数</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>的元素 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝑏</mi><mrow><mi>𝑖</mi><mi>𝑘</mi></mrow></msub></mrow><annotation encoding="application/x-tex">𝑏_{𝑖𝑘}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">ik</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 表示状态 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝑤</mi><mi>𝑖</mi></msub></mrow><annotation encoding="application/x-tex">𝑤_𝑖</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 输出观察值 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>𝑣</mi><mi>𝑘</mi></msub></mrow><annotation encoding="application/x-tex">𝑣_𝑘</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的概率，与时刻 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝑡</mi></mrow><annotation encoding="application/x-tex">𝑡</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span> 无关<br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mrow><mi>i</mi><mi>k</mi></mrow></msub><mrow><mi>M</mi><mi>x</mi><mi>K</mi></mrow><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">B=(b_{ik}{MxK})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">ik</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">x</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span><span class="mclose">)</span></span></span></span><br><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mrow><mi>i</mi><mi>k</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>v</mi><mi>k</mi></msub><mi mathvariant="normal">∣</mi><mi>w</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">b_{ik}=P(v(t)=v_k|w(t)=w_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">ik</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;HMM隐马尔可夫模型&quot;&gt;HMM隐马尔可夫模型&lt;/h2&gt;
&lt;h3 id=&quot;观察序列与观察值&quot;&gt;观察序列与观察值&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;时间序列：某些应用中，识别对象是一个动态的过程，无法用静态的矢量描述
&lt;ul&gt;
&lt;li&gt;这些动态过程往往与时间相关，一般采用时</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Unity-四元数</title>
    <link href="https://escapeey.github.io/post/f9b28ede.html"/>
    <id>https://escapeey.github.io/post/f9b28ede.html</id>
    <published>2023-10-23T11:33:49.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h2 id="为什么使用四元数">为什么使用四元数</h2><ul><li>欧拉角的缺点<ul><li>同一旋转的表示不唯一</li><li>万向节死锁(Gimbal Lock)<ul><li><p>当某个特定轴到达某个特殊值时，绕一个轴旋转可能会覆盖住另一个轴的旋转，从而失去一维自由度<br><img src="..\img\Unity\GimbalLock.png" width="50%" height="50%"></p></li><li><p>最外层和最内层的旋转轴重合</p></li><li><p>例如 Unity中X轴达到90度时就会发生</p></li></ul></li></ul></li><li>四元数不存在万向节死锁的问题</li></ul><h2 id="四元数是什么">四元数是什么</h2><h3 id="定义">定义</h3><ul><li>形如 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>i</mi><mo>+</mo><mi>b</mi><mi>j</mi><mo>+</mo><mi>c</mi><mi>k</mi><mo>+</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">ai+bj+ck+d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7429em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">ai</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">bj</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span>的数字，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo separator="true">,</mo><mi>c</mi><mo separator="true">,</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">a,b,c,d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span></span></span></span>是实数<ul><li>可以看作一个四元数包含了一个标量和一个3D向量</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>w</mi><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[w,v]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">]</span></span></span></span>,<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span>为标量，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>为3D向量</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>w</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[w,(x,y,z)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)]</span></span></span></span></li></ul></li><li>对于给定的任意一个四元数：表示3D空间的一个旋转量</li></ul><h3 id="轴-角对">轴-角对</h3><ul><li>在3D空间中，任意旋转都可以表示绕着某个轴旋转一个旋转角得到(该轴是任意一个轴，不一定是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi></mrow><annotation encoding="application/x-tex">x,y,z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span>轴)</li></ul><h3 id="四元数旋转">四元数旋转</h3><ul><li>对于给定旋转，假设绕着<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>轴，旋转<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span>度，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>轴为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo separator="true">,</mo><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y,z)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span>，那么可以构成四元数为<ul><li>四元数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>=</mo><mo stretchy="false">[</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">q = [cos(\beta/2),sin(\beta/2)n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mord mathnormal">n</span><span class="mclose">]</span></span></span></span></li><li>四元数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>=</mo><mo stretchy="false">[</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mi>x</mi><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mi>y</mi><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mi>z</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">q = [cos(\beta/2),sin(\beta/2)x,sin(\beta/2)y,sin(\beta/2)z]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">]</span></span></span></span><br><font color=red>这里一定为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">\beta/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span></span></span></span></font></li></ul></li><li>四元数q表示绕着轴<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，旋转<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span>度的旋转量</li></ul><h2 id="Unity中的四元数">Unity中的四元数</h2><p><font color=green><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mi>u</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>n</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">Quaternion</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Q</span><span class="mord mathnormal">u</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">ni</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span></span></span></span></font>是Unity中表示四元数的结构体</p><h3 id="初始化">初始化</h3><p>轴角对公式初始化</p><ul><li>方法一 (为计算原理，不用)<br>四元数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>=</mo><mo stretchy="false">[</mo><mi>c</mi><mi>o</mi><mi>s</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mi>x</mi><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mi>y</mi><mo separator="true">,</mo><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>β</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo><mi>z</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">q = [cos(\beta/2),sin(\beta/2)x,sin(\beta/2)y,sin(\beta/2)z]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mord">/2</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">]</span></span></span></span></li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//假设绕(1,0,0)旋转60度</span></span><br><span class="line">Quaternino q = <span class="keyword">new</span> Quaternino(Mathf.Sin(<span class="number">30</span> * Mathf.Deg2Rad), <span class="number">0</span>, <span class="number">0</span>, Mathf.Cos(<span class="number">30</span> * Mathf.Deg2Rad));</span><br></pre></td></tr></table></figure><ul><li>方法二 (封装的方法)</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//假设绕(1,0,0)旋转60度</span></span><br><span class="line">Quaternino q = Quaternino.AngleAxis(<span class="number">60</span>, Vector3.right);</span><br></pre></td></tr></table></figure><h3 id="四元数和欧拉角转换">四元数和欧拉角转换</h3><ul><li>欧拉角转四元数 (静态方法)</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Quaternino q = Quaternino.Euler(<span class="number">60</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure><ul><li>四元数转欧拉角 (成员属性)</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(q.eulerAngles)</span><br></pre></td></tr></table></figure><h3 id="四元数弥补欧拉角缺点">四元数弥补欧拉角缺点</h3><p><font color=red>四元数相乘代表旋转四元数</font></p><ul><li><p>解决同一旋转的表示不唯一<br>四元数旋转角度始终在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mo>−</mo><mn>18</mn><msup><mn>0</mn><mi>o</mi></msup><mo>∼</mo><mn>18</mn><msup><mn>0</mn><mi>o</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(-180^o\sim180^o)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord">18</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">o</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">18</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">o</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>之间</p></li><li><p>解决万向节死锁(Gimbal Lock)<br>在万向节死锁时仍然可以通过四元数乘法来使物体绕自己指定的轴旋转</p></li><li><p>tips:以下代码在界面上rotation = (90,0,0)的前提下演示，此时万向节已经死锁</p></li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 提示：这里的Vector3.up代表的是本地坐标系的y轴,不是世界坐标系的</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>.transform.rotation *= Quatenion.AngleAxis(<span class="number">1</span>, Vector3.up);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>对比欧拉角，这个会出现万向节死锁</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Vector3 e;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    e = <span class="keyword">this</span>.transform.rotation.eulerAngles;</span><br><span class="line">    e += Vector3.up;</span><br><span class="line">    <span class="keyword">this</span>.transform.rotation = Quatenion.Euler(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="四元数的常用方法">四元数的常用方法</h3><h4 id="单位四元数-用于初始化对象">单位四元数 用于初始化对象</h4><ul><li>当角度为0或者360度时</li><li>单位四元数表示没有旋转量</li><li>对于任何给定轴都有单位四元数</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1,(0,0,0)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose">)]</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-1,(0,0,0)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span><span class="mclose">)]</span></span></span></span>都是单位四元数表示没有旋转量</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(Quatenion.identity);</span><br><span class="line"><span class="comment">//实例化时使用</span></span><br><span class="line">Instantiate(testObj, Vector3.zero, Quaternion.identity);</span><br></pre></td></tr></table></figure><h4 id="四元数插值运算">四元数插值运算</h4><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>s</mi><mi>u</mi><mi>l</mi><mi>t</mi><mo>=</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo>+</mo><mo stretchy="false">(</mo><mi>e</mi><mi>n</mi><mi>d</mi><mo>−</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo stretchy="false">)</mo><mo>∗</mo><mi>t</mi></mrow><annotation encoding="application/x-tex">result = start + (end-start) * t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">res</span><span class="mord mathnormal">u</span><span class="mord mathnormal">lt</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6984em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></p><pre><code>Quaternion.Slerp(start, end, t);</code></pre><ul><li>四元数同样提供如同Vector3的插值运算<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>e</mi><mi>r</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">Lerp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">p</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>l</mi><mi>e</mi><mi>r</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">Slerp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">Sl</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">p</span></span></span></span></li><li>二者区别不大,<font color=red><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>l</mi><mi>e</mi><mi>r</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">Slerp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">Sl</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">p</span></span></span></span>效果好一些，建议使用</font></li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Update</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//1. 无限接近 先快后慢</span></span><br><span class="line">    A.transform.rotation = Quaternion.Slerp(A.transform.rotation, target.rotation, Time.deltaTime);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 匀速变化 time&gt;=1到达目标</span></span><br><span class="line">    <span class="comment">//这种匀速移动 当time&gt;=1时 当目标位置改变后 他会直接瞬间变到目标的角度 所以加入以下判断</span></span><br><span class="line">    <span class="keyword">if</span>(nowTarget != target.rotation)</span><br><span class="line">    &#123;</span><br><span class="line">        nowTarget = target.rotation;</span><br><span class="line">        time = <span class="number">0</span>;</span><br><span class="line">        start = B.rotation;</span><br><span class="line">    &#125;</span><br><span class="line">    time += Time.deltaTime;</span><br><span class="line">    B.trainsform.rotation = Quaternion.Slerp(start, nowTarget, time);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="向量指向转四元数">向量指向转四元数</h4><pre><code>Quaternino.LookRotation(面朝向量);</code></pre><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>o</mi><mi>o</mi><mi>k</mi><mi>R</mi><mi>o</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">LookRotation</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">oo</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal">o</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span></span></span></span>方法将传入的面朝向量转换为对应的四元数角度信息<br><img src="..\img\Unity\LookRotation演示.png" width="30%" height="30%"></li><li>举例：当<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>面朝向想改变时，只需要把<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>之间的向量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mrow><mi>A</mi><mi>B</mi></mrow><mo stretchy="true">→</mo></mover></mrow><annotation encoding="application/x-tex">\overrightarrow{AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2053em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.2053em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span><span class="svg-align" style="top:-3.6833em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="height:0.522em;min-width:0.888em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span></span></span></span></span></span></span></span>传入该函数，便可以得到目标四元数角度信息，之后将<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>四元数角度信息改为得到的信息即可转向</li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Quaternion q = Quaternion.LookRotation(B.position - A.position);</span><br><span class="line">A.rotation = q;</span><br></pre></td></tr></table></figure><h3 id="四元数计算">四元数计算</h3><h4 id="四元数相乘">四元数相乘</h4><ul><li>两个四元数相乘得到一个新的四元数，代表两个旋转量的叠加</li><li>相当于旋转</li><li><font color=red>注意：旋转相对的坐标系 是物体自身坐标系</font></li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Quaternion q = Quaternion.AngleAxis(<span class="number">20</span>, Vector3.up);</span><br><span class="line"><span class="keyword">this</span>.transform.rotation *= q;</span><br></pre></td></tr></table></figure><h4 id="四元数乘向量">四元数乘向量</h4><ul><li>四元数乘向量返回一个新向量</li><li>可以将指定向量旋转对应四元数的旋转量，相当于旋转向量</li><li><font color=red>注意：一定是四元数乘向量 先后顺序不能改变</font></li></ul><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Vector3 v = Vector3.forward;</span><br><span class="line">v = Quaternion.AngleAxis(<span class="number">45</span>, Vector3.up) * v;</span><br></pre></td></tr></table></figure><ul><li>实例：比如做弹幕类游戏，现有一个弹幕的方向，则可通过乘四元数旋转得到一圈弹幕的方向</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;为什么使用四元数&quot;&gt;为什么使用四元数&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;欧拉角的缺点
&lt;ul&gt;
&lt;li&gt;同一旋转的表示不唯一&lt;/li&gt;
&lt;li&gt;万向节死锁(Gimbal Lock)
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;当某个特定轴到达某个特殊值时，绕一个轴旋转可能会覆盖住另一个轴</summary>
      
    
    
    
    <category term="Unity" scheme="https://escapeey.github.io/categories/Unity/"/>
    
    
    <category term="C#" scheme="https://escapeey.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>工具网站</title>
    <link href="https://escapeey.github.io/post/92edcf8f.html"/>
    <id>https://escapeey.github.io/post/92edcf8f.html</id>
    <published>2023-10-22T15:19:55.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<h2 id="语法工具">语法工具</h2><h3 id="Markdown语法"><a href="https://wuwufq.blog.csdn.net/article/details/127898890?spm=1001.2101.3001.6661.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-127898890-blog-124603661.pc_relevant_3mothn_strategy_and_data_recovery&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-127898890-blog-124603661.pc_relevant_3mothn_strategy_and_data_recovery&amp;utm_relevant_index=1">Markdown语法</a></h3><h3 id="Latex语法"><a href="https://www.luogu.com.cn/blog/IowaBattleship/latex-gong-shi-tai-quan">Latex语法</a></h3><h2 id="功能性工具">功能性工具</h2><h3 id="在线OCR"><a href="https://uutool.cn/ocr/">在线OCR</a></h3><h3 id="ppt转pdf"><a href="https://tools.pdf24.org/zh/ppt-to-pdf#s=1697960230853">ppt转pdf</a></h3><h2 id="数学工具">数学工具</h2><h3 id="建系工具"><a href="https://www.desmos.com/calculator?lang=zh-CN">建系工具</a></h3><h2 id="美化工具">美化工具</h2><h3 id="文档语法高亮"><a href="http://word.wd1x.com/">文档语法高亮</a></h3><h3 id="代码格式化截图"><a href="https://www.wetools.com/code-snapshot">代码格式化截图</a></h3><h2 id="图片素材">图片素材</h2><h3 id="阿里巴巴矢量图库"><a href="https://www.iconfont.cn/">阿里巴巴矢量图库</a></h3><h3 id="花瓣网"><a href="https://huaban.com/materials">花瓣网</a></h3><h3 id="摄影素材"><a href="https://unsplash.com/">摄影素材</a></h3><h2 id="5-博客工具">5. 博客工具</h2><h3 id="5-1-Butterfly文档">5.1 <a href="https://butterfly.js.org/">Butterfly文档</a></h3><h3 id="5-2-图床">5.2 <a href="https://imgloc.com/">图床</a></h3>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;语法工具&quot;&gt;语法工具&lt;/h2&gt;
&lt;h3 id=&quot;Markdown语法&quot;&gt;&lt;a href=&quot;https://wuwufq.blog.csdn.net/article/details/127898890?spm=1001.2101.3001.6661.1&amp;amp;ut</summary>
      
    
    
    
    <category term="工具" scheme="https://escapeey.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="工具" scheme="https://escapeey.github.io/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>GMM高斯混合模型</title>
    <link href="https://escapeey.github.io/post/6d95358d.html"/>
    <id>https://escapeey.github.io/post/6d95358d.html</id>
    <published>2023-10-20T20:53:10.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<span id="more"></span><h2 id="GMM高斯混合模型原理">GMM高斯混合模型原理</h2><h3 id="混合密度模型">混合密度模型</h3><p>复杂的概率密度函数可以由简单密度函数线性组合构成</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><msub><mi>a</mi><mi>k</mi></msub><msub><mi>p</mi><mi>k</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">∣</mi><msub><mi>θ</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><mo separator="true">,</mo><mspace width="1em"/><msub><mi>a</mi><mi>k</mi></msub><mo>&gt;</mo><mn>0</mn><mo separator="true">,</mo><mspace width="1em"/><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><msub><mi>a</mi><mi>k</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">p(x|\theta) = {\sum\limits_{k=1}^{M} a_{k}p_{k}(x|\theta_k)},\quad a_{k}&gt;0,\quad \sum\limits_{k=1}^{M} a_{k}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.1304em;vertical-align:-1.3021em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3021em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.1304em;vertical-align:-1.3021em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3021em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></p><p>GMM 是混合密度模型的一个特例，由多个高斯（正态分布）函数的组合构成</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><msub><mi>a</mi><mi>k</mi></msub><mi>N</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">;</mo><msub><mi>μ</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi mathvariant="normal">Σ</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x) = \sum\limits_{k=1}^{M} a_{k}N(x;\mu_k,\Sigma_k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.1304em;vertical-align:-1.3021em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3021em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><h4 id="以下3点对于理解GMM模型的预测很重要">以下3点对于理解GMM模型的预测很重要</h4><p><mark>！！！重点敲黑板！！！</mark></p><ul><li>这里的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>是似然函数，完整表达应该是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">∣</mi><msub><mi>ω</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(x|\omega_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，这里的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ω</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\omega_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示是第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>类数据，即训练GMM其实对每一类都单独学习一个GMM模型。</li><li>比如：在分类问题中，如10分类问题。<ul><li>首先学习到10个不同的GMM模型（即似然函数公式）；</li><li>通过预测样本带入似然函数公式，得到概率密度值；</li><li>再乘以不同类别的先验概率<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><msub><mi>ω</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(\omega_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，得到10个对应预测样本的后验概率<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo stretchy="false">(</mo><msub><mi>ω</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">p(\omega_i|x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>；</li><li>取这10个值里最大的所对应的类别作为这个样本的类别。</li></ul></li><li>这一切预测都是基于贝叶斯公式：</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>ω</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mi mathvariant="normal">∣</mi><msub><mi>ω</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>ω</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><mrow><mi>p</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">P(\omega_i|x)={\dfrac{p(x|\omega_i)P(\omega_i)}{p(x)}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p><h3 id="GMM的极大似然估计（参数估计）">GMM的极大似然估计（参数估计）</h3><p>GMM 需要估计的参数:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>θ</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>α</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>α</mi><mi>M</mi></msub><mo separator="true">,</mo><msub><mi>μ</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>μ</mi><mi>M</mi></msub><mo separator="true">,</mo><msub><mi mathvariant="normal">Σ</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi mathvariant="normal">Σ</mi><mi>M</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta=(\alpha_1,\dots,\alpha_M,\mu_1,\dots,\mu_M,\Sigma_1,\dots,\Sigma_M)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><p>对数似然函数:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>l</mi><mo stretchy="false">(</mo><mi>θ</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>l</mi><mi>n</mi><mrow><mo fence="true">[</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><msub><mi>a</mi><mi>k</mi></msub><mi>N</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">;</mo><msub><mi>μ</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi mathvariant="normal">Σ</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">l({\theta})=\sum\limits_{i=1}^nln\left[\sum\limits_{k=1}^M a_{k}N(x_i;\mu_k,\Sigma_k)\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.1304em;vertical-align:-1.3021em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">[</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3021em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">]</span></span></span></span></span></span></span></p><ul><li>极值点方程是复杂的超越方程组，很难直接求解</li><li>常用的 GMM 参数估计方法是 EM 算法</li></ul><p>训练集和待学习参数</p><ul><li>训练数据集:  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>X</mi></msub><mo>=</mo><mo stretchy="false">{</mo><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">D_X = \{X_1,\dots,X_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></li><li>学习参数: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>=</mo><mo stretchy="false">{</mo><msub><mi>α</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi>μ</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi mathvariant="normal">Σ</mi><mi>k</mi></msub><msub><mo stretchy="false">}</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>M</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\theta=\{\alpha_k,\mu_k,\Sigma_k\}_{k=1,\dots,M}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="minner mtight">…</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></li></ul><p>存在的问题</p><ul><li>只有样本 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ，但不知道是由哪一个成份高斯产生的</li><li>令 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">y_i=k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>表示 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是由第<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>个成份高斯产生，构造集合：</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>D</mi><mi>Y</mi></msub><mo>=</mo><mo stretchy="false">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">D_Y=\{y_1,\dots,y_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></span></p><ul><li>完整的数据集 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><msub><mi>D</mi><mi>X</mi></msub><mo>∪</mo><msub><mi>D</mi><mi>Y</mi></msub></mrow><annotation encoding="application/x-tex">D=D_X\cup D_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>Y</mi></msub></mrow><annotation encoding="application/x-tex">D_Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>为缺失的数据</li></ul><h2 id="EM算法">EM算法</h2><ul><li>理解要点<br><mark>！！！重点敲黑板！！！</mark><br>对于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>Y</mi></msub><mo>=</mo><mo stretchy="false">{</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">D_Y=\{y_1,\dots,y_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">Y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>,相对于武断的将每个训练样本确定为某个高斯产生的，更好的做法是计算每个样本由每个高斯产生的概率，后文的代码实现也是基于这一点的，其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>d</mi><mi>f</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">pdfs</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.10764em;">df</span><span class="mord mathnormal">s</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>∗</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">m*k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>维矩阵，每行为该样本由不同高斯产生的概率，共有m个样本。</li></ul><h3 id="E步（Expectation）">E步（Expectation）</h3><ul><li>隐变量的概率估计</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy="false">)</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy="false">)</mo></mrow><mrow><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow></mfrac><mo>=</mo><mfrac><mrow><msub><mi>a</mi><mi>k</mi></msub><mi>N</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">;</mo><msub><mi>μ</mi><mi>k</mi></msub><mo separator="true">,</mo><msub><mi mathvariant="normal">Σ</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><msub><mi>a</mi><mi>j</mi></msub><mi>N</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">;</mo><msub><mi>μ</mi><mi>j</mi></msub><mo separator="true">,</mo><msub><mi mathvariant="normal">Σ</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(1)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">P(y_i=k|x_i)=\dfrac{P(y_i=k)P(x_i|y_i=k)}{P(x_i)}=\dfrac{a_{k}N(x_i;\mu_k,\Sigma_k)}{\sum\limits_{j=1}^M a_{j}N(x_i;\mu_j,\Sigma_j)} \tag{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.9591em;vertical-align:-2.5321em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.5283em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5283em;"><span style="top:-2.1223em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-3.95em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.7583em;"><span class="pstrut" style="height:3.5283em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.2053em;"><span class="pstrut" style="height:3.5283em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord">Σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.5321em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:3.9591em;vertical-align:-2.5321em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></p><h3 id="M步（Maximize）">M步（Maximize）</h3><ul><li>每个高斯分布参数也需要由所有样本参与估计，同时需要</li><li>考虑样本由不同高斯产生的概率</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mover accent="true"><mi>a</mi><mo>^</mo></mover><mi>k</mi></msub><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>P</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\hat{a}_k=\dfrac{1}{n}\sum\limits_{i=1}^nP(y_i=k) \tag{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">a</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height:2.9291em;vertical-align:-1.2777em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mover accent="true"><mi>μ</mi><mo>^</mo></mover><mi>k</mi></msub><mo>=</mo><mfrac><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>P</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy="false">)</mo><msub><mi>x</mi><mi>i</mi></msub></mrow><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>P</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\hat{\mu}_k=\dfrac{\sum\limits_{i=1}^nP(y_i=k)x_i}{\sum\limits_{i=1}^nP(y_i=k)} \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">μ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.9381em;vertical-align:-2.2191em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.7191em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.3514em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3514em;"><span style="top:-2.1223em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-3.95em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span><span style="top:-3.5814em;"><span class="pstrut" style="height:3.3514em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.7191em;"><span class="pstrut" style="height:3.3514em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3514em;"><span style="top:-2.1223em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-3.95em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.2191em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:4.9381em;vertical-align:-2.2191em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mover accent="true"><mi mathvariant="normal">Σ</mi><mo>^</mo></mover><mi>k</mi></msub><mo>=</mo><mfrac><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>P</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent="true"><mi>μ</mi><mo>^</mo></mover><mi>k</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent="true"><mi>μ</mi><mo>^</mo></mover><mi>k</mi></msub><msup><mo stretchy="false">)</mo><mi>t</mi></msup></mrow><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>P</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></mfrac></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(4)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\hat{\Sigma}_k=\dfrac{\sum\limits_{i=1}^nP(y_i=k)(x_i-\hat{\mu}_k)(x_i-\hat{\mu}_k)^t}{\sum\limits_{i=1}^nP(y_i=k)} \tag{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0968em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9468em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord">Σ</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.25em;"><span class="mord">^</span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:4.9381em;vertical-align:-2.2191em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.7191em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.3514em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3514em;"><span style="top:-2.1223em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-3.95em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span><span style="top:-3.5814em;"><span class="pstrut" style="height:3.3514em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.7191em;"><span class="pstrut" style="height:3.3514em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3514em;"><span style="top:-2.1223em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-3.95em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">μ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">μ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2222em;"><span class="mord">^</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7936em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.2191em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:4.9381em;vertical-align:-2.2191em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">4</span></span><span class="mord">)</span></span></span></span></span></span></p><h2 id="算法">算法</h2><hr><p>Input: 训练集<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>X</mi></msub><mo>=</mo><mo stretchy="false">{</mo><msub><mi>X</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>X</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">D_X = \{X_1,\dots,X_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>，高斯数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span><br>Output: GMM的模型参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span></p><ol><li>随机初始化<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>;</li><li>repeat<br>E步：公式(1)估计样本由不同高斯产生的概率；<br>M步：公式(2-4)重新估计模型的参数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>；</li><li>until 达到收敛精度</li></ol><hr><p>类比KMeans算法：</p><ul><li>E步是在已知质心位置的条件下，把各点聚类到最近的质心；</li><li>M步是根据类内各点，调整质心位置。</li></ul><h2 id="实验及代码">实验及代码</h2><h3 id="实验内容">实验内容</h3><ol><li>使用Python编程实现GMM算法：要求独立完成算法编程，禁止调用已有函数库或工具箱中的函数；</li><li>使用仿真数据测试程序的正确性：<ol><li>两类2维各1000个训练样本；</li><li>每个类别的样本分别采样自包含2个分量的高斯混合模型，分别使用两个类别的训练样本学习模型化每个类别条件概率密度的GMM模型参数，并与模型的真实值比较；</li><li>假设两个类别的先验概率相等，使用学习到的模型参数分类测试样本数据，统计分类的正确率</li></ol></li><li>MNIST数据集测试：<ol><li>MNIST-Train-Samples.csv中包含30000个17维特征手写数字样本训练，MNIST-Train-Labels.csv中包含训练样本的标签；</li><li>分别使用每个数字的样本集学习该类别的GMM模型参数；</li><li>使用10个类别GMM模型构成的分类器，分类MNIST-Test-Samples.csv中的10000个样本，与MNIST-Test-Labels.csv的类别标记比对，计算识别的正确率；</li><li>尝试设置不同的GMM模型超参数—高斯数，测试不同高斯数的GMM分类器的识别正确率；</li></ol></li></ol><h3 id="程序代码">程序代码</h3><h4 id="导入库并制作工具函数">导入库并制作工具函数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib.patches <span class="keyword">import</span> Ellipse</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">warnings.filterwarnings(<span class="string">&quot;ignore&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制椭圆参考代码</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot_cov_ellipse</span>(<span class="params">cov, pos, nstd=<span class="number">2</span>, ax=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eigsorted</span>(<span class="params">cov</span>):</span><br><span class="line">        vals, vecs = np.linalg.eigh(cov)</span><br><span class="line">        order = vals.argsort()[::-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> vals[order], vecs[:, order]</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> ax <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        ax = plt.gca()</span><br><span class="line"> </span><br><span class="line">    vals, vecs = eigsorted(cov)</span><br><span class="line">    theta = np.degrees(np.arctan2(*vecs[:, <span class="number">0</span>][::-<span class="number">1</span>]))</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># Width and height are &quot;full&quot; widths, not radius</span></span><br><span class="line">    width, height = <span class="number">2</span> * nstd * np.sqrt(vals)</span><br><span class="line">    ellip = Ellipse(xy=pos, width=width, height=height, facecolor=<span class="string">&#x27;#c8e0e4&#x27;</span>, angle=theta)</span><br><span class="line"> </span><br><span class="line">    ax.add_artist(ellip)</span><br><span class="line">    <span class="keyword">return</span> ellip</span><br><span class="line"><span class="comment"># 绘图函数 在二维特征时可用</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">plot</span>(<span class="params">data, mu, covariance, class_label</span>):</span><br><span class="line">    plt.scatter(data[:, <span class="number">0</span>], data[:, <span class="number">1</span>], c=class_label)</span><br><span class="line">    n_components = <span class="built_in">len</span>(mu)</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n_components):</span><br><span class="line">        plot_cov_ellipse(covariance[j], mu[j])</span><br><span class="line">    plt.show()</span><br><span class="line"><span class="comment"># 定义高斯函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Gaussian</span>(<span class="params">x, mu, covariance</span>):</span><br><span class="line">    ret = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> x:</span><br><span class="line">        X, mu, covariance = np.array(i), np.array(mu), np.array(covariance)</span><br><span class="line">        ret.append( np.exp(-<span class="number">0.5</span> * (np.dot(np.dot((X-mu).T, np.linalg.inv(covariance)), X-mu))) /</span><br><span class="line">                    math.sqrt(np.linalg.det(<span class="number">2.0</span> * math.pi * covariance)))</span><br><span class="line">    <span class="keyword">return</span> np.array(ret)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="GMM面向对象实现">GMM面向对象实现</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GMM主体</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GMM</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, X, y, n_components, iteration=<span class="number">40</span>, eps=<span class="number">1e-9</span></span>):</span><br><span class="line">        self.X = X</span><br><span class="line">        self.y = y</span><br><span class="line">        self.m, self.n = X.shape</span><br><span class="line">        <span class="comment"># 组数</span></span><br><span class="line">        self.n_components = n_components</span><br><span class="line">        self.iteration = iteration</span><br><span class="line">        self.eps = eps</span><br><span class="line">        <span class="comment"># 高斯混合模型参数</span></span><br><span class="line">        self.alpha = np.ones(n_components) * <span class="number">1</span> / n_components</span><br><span class="line">        self.mu = np.random.random((self.n_components, self.n))</span><br><span class="line">        self.covariance = np.zeros((self.n_components, self.n, self.n))</span><br><span class="line">        <span class="comment"># 1. 随机初始化 mu 为样本随机点</span></span><br><span class="line">        <span class="comment"># mu n_components * 2</span></span><br><span class="line">        row_rand_array = np.arange(X.shape[<span class="number">0</span>])</span><br><span class="line">        np.random.shuffle(row_rand_array)</span><br><span class="line">        self.mu = X[row_rand_array[<span class="number">0</span>:n_components]]</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 2. 初始化 cov alpha</span></span><br><span class="line">        <span class="comment"># 计算每个样本到 初始化中心点 的距离 </span></span><br><span class="line">        distance = np.tile(np.<span class="built_in">sum</span>(X * X, axis=<span class="number">1</span>).reshape((self.m, <span class="number">1</span>)), (<span class="number">1</span>, self.n_components)) + np.tile(np.<span class="built_in">sum</span>(self.mu * self.mu, axis=<span class="number">1</span>).T,(self.m, <span class="number">1</span>)) - <span class="number">2</span> * np.dot(X, self.mu.T)</span><br><span class="line">        <span class="comment"># 初始标签 按照距离分类</span></span><br><span class="line">        orginial_labels = np.argmin(distance, axis=<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.n_components):</span><br><span class="line">            temp = X[orginial_labels == i, :]</span><br><span class="line">            self.alpha[i] = temp.shape[<span class="number">0</span>] / self.m</span><br><span class="line">            self.covariance[i, :, :] = np.cov(temp.T)</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># 3. 概率密度 推断样本 𝐱𝑖 由每一个高斯产生的概率</span></span><br><span class="line">        <span class="comment"># m * n_components </span></span><br><span class="line">        <span class="comment"># 第i行 为 样本 𝐱𝑖 由每一个高斯产生的概率</span></span><br><span class="line">        self.pdfs = np.zeros((self.m, self.n_components))</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Train</span>(<span class="params">self</span>):</span><br><span class="line">        nowIter = <span class="number">0</span></span><br><span class="line">        preLogLikelihood = self.LogLikelihood()</span><br><span class="line">        <span class="keyword">while</span> nowIter &lt; self.iteration:</span><br><span class="line">            <span class="keyword">if</span> nowIter % <span class="number">20</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Iter:&quot;</span>, nowIter)</span><br><span class="line">            self.Expectation()</span><br><span class="line">            self.Maximize()</span><br><span class="line"><span class="comment">#             plot(self.X, self.mu, self.covariance, self.y)</span></span><br><span class="line">            nowIter += <span class="number">1</span></span><br><span class="line">            logLikelihood = self.LogLikelihood()</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">abs</span>(logLikelihood - preLogLikelihood) &lt; self.eps:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            preLogLikelihood = logLikelihood</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">    <span class="comment"># 根据当前的各个组分 alpha、mu 和 covariance 计算对数似然函数值</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">LogLikelihood</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(self.n_components):</span><br><span class="line">            self.pdfs[:, j] = self.alpha[j] * Gaussian(self.X, self.mu[j], self.covariance[j])</span><br><span class="line">        <span class="keyword">return</span> np.mean(np.log(np.<span class="built_in">sum</span>(self.pdfs, axis=<span class="number">1</span>)))</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Expectation</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># E步</span></span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(self.n_components):</span><br><span class="line">            self.pdfs[:,k] = self.alpha[k] * Gaussian(self.X, self.mu[k], self.covariance[k])</span><br><span class="line">            self.W = self.pdfs / np.<span class="built_in">sum</span>(self.pdfs,axis=<span class="number">1</span>).reshape(-<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">Maximize</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># M步</span></span><br><span class="line">        self.alpha = np.<span class="built_in">sum</span>(self.W, axis=<span class="number">0</span>) / np.<span class="built_in">sum</span>(self.W)</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(self.n_components):</span><br><span class="line">            self.mu[k] = np.average(self.X, axis=<span class="number">0</span>, weights=self.W[:, k])</span><br><span class="line">            cov = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.m):</span><br><span class="line">                temp = (self.X[i, :] - self.mu[k, :]).reshape(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">                cov += self.W[i, k] * np.dot(temp, temp.T)</span><br><span class="line">            self.covariance[k, :, :] = cov / np.<span class="built_in">sum</span>(self.W[:, k]) </span><br></pre></td></tr></table></figure><h4 id="Emu数据测试">Emu数据测试</h4><p><strong>参数估计</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">train_X = pd.read_csv(<span class="string">r&#x27;Emu-Train-Samples.csv&#x27;</span>, header=<span class="literal">None</span>)</span><br><span class="line">train_Y = pd.read_csv(<span class="string">r&#x27;Emu-Train-Labels.csv&#x27;</span>, header=<span class="literal">None</span>)</span><br><span class="line">train = copy.deepcopy(train_X)</span><br><span class="line">train[<span class="string">&quot;label&quot;</span>] = train_Y</span><br><span class="line">train = train.to_numpy()</span><br><span class="line">train_1_X = np.array([[i[<span class="number">0</span>], i[<span class="number">1</span>]] <span class="keyword">for</span> i <span class="keyword">in</span> train <span class="keyword">if</span> i[<span class="number">2</span>] == <span class="number">0</span>])</span><br><span class="line">train_1_Y = np.array([i[<span class="number">2</span>] <span class="keyword">for</span> i <span class="keyword">in</span> train <span class="keyword">if</span> i[<span class="number">2</span>] == <span class="number">0</span>])</span><br><span class="line">train_2_X = np.array([[i[<span class="number">0</span>], i[<span class="number">1</span>]] <span class="keyword">for</span> i <span class="keyword">in</span> train <span class="keyword">if</span> i[<span class="number">2</span>] == <span class="number">1</span>])</span><br><span class="line">train_2_Y = np.array([i[<span class="number">2</span>] <span class="keyword">for</span> i <span class="keyword">in</span> train <span class="keyword">if</span> i[<span class="number">2</span>] == <span class="number">1</span>])</span><br><span class="line">plt.scatter(train_1_X[:, <span class="number">0</span>], train_1_X[:, <span class="number">1</span>], c=<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line">plt.scatter(train_2_X[:, <span class="number">0</span>], train_2_X[:, <span class="number">1</span>], c=<span class="string">&#x27;green&#x27;</span>)</span><br><span class="line"></span><br><span class="line">myGMM1 = GMM(train_1_X, train_1_Y, <span class="number">2</span>)</span><br><span class="line">myGMM1.Train()</span><br><span class="line">myGMM2 = GMM(train_2_X, train_2_Y, <span class="number">2</span>)</span><br><span class="line">myGMM2.Train()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Class_1:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mu:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(myGMM1.mu)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;alpha:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(myGMM1.alpha)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;covariance:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(myGMM1.covariance)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Class_2:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;mu:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(myGMM2.mu)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;alpha:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(myGMM2.alpha)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;covariance:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(myGMM2.covariance)</span><br></pre></td></tr></table></figure><p><strong>预测</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">test_X = pd.read_csv(<span class="string">r&#x27;Emu-Test-Samples.csv&#x27;</span>, header=<span class="literal">None</span>).to_numpy()</span><br><span class="line">test_Y = pd.read_csv(<span class="string">r&#x27;Emu-Test-Labels.csv&#x27;</span>, header=<span class="literal">None</span>).to_numpy().reshape(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Likelihood</span>(<span class="params">X, alpha, mu, covariance, n_components</span>):</span><br><span class="line">    pdfs = np.zeros((<span class="built_in">len</span>(X), n_components))</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(n_components):</span><br><span class="line">        pdfs[:, k] = alpha[k] * Gaussian(X, mu[k], covariance[k])</span><br><span class="line">    <span class="keyword">return</span> np.<span class="built_in">sum</span>(pdfs, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">pdfs_1 = Likelihood(test_X, myGMM1.alpha, myGMM1.mu, myGMM1.covariance, <span class="built_in">len</span>(myGMM1.alpha))</span><br><span class="line">pdfs_2 = Likelihood(test_X, myGMM2.alpha, myGMM2.mu, myGMM2.covariance, <span class="built_in">len</span>(myGMM2.alpha))</span><br><span class="line"></span><br><span class="line">predict = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(test_X)):</span><br><span class="line">    <span class="keyword">if</span>(pdfs_1[i] &gt; pdfs_2[i]):</span><br><span class="line">        predict.append(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        predict.append(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">accuracy = <span class="built_in">sum</span>(predict == test_Y) / <span class="built_in">len</span>(predict)</span><br><span class="line"><span class="built_in">print</span>(accuracy)</span><br></pre></td></tr></table></figure><h4 id="MNIST数据集测试">MNIST数据集测试</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">train_mnist_X = pd.read_csv(<span class="string">r&#x27;MNIST-Train-Samples.csv&#x27;</span>, header=<span class="literal">None</span>)</span><br><span class="line">train_mnist_Y = pd.read_csv(<span class="string">r&#x27;MNIST-Train-Labels.csv&#x27;</span>, header=<span class="literal">None</span>)</span><br><span class="line">test_mnist_X = pd.read_csv(<span class="string">r&#x27;MNIST-Test-Samples.csv&#x27;</span>, header=<span class="literal">None</span>)</span><br><span class="line">test_mnist_Y = pd.read_csv(<span class="string">r&#x27;MNIST-Test-Labels.csv&#x27;</span>, header=<span class="literal">None</span>)</span><br><span class="line">train_mnist = train_mnist_X</span><br><span class="line">train_mnist[<span class="string">&quot;label&quot;</span>] = train_mnist_Y</span><br><span class="line">train_mnist = train_mnist.to_numpy()</span><br><span class="line">test_mnist_X = test_mnist_X.to_numpy()</span><br><span class="line">test_mnist_Y = test_mnist_Y.to_numpy().reshape(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">GmmOfMnist</span>(<span class="params">number</span>):</span><br><span class="line">    alphas = []</span><br><span class="line">    mus = []</span><br><span class="line">    covariances = []</span><br><span class="line">    pdfs = []</span><br><span class="line"></span><br><span class="line"><span class="comment">#     print(&quot;Train Begin!&quot;)</span></span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;GMM&quot;</span>, number,<span class="string">&quot; &quot;</span>, <span class="string">&quot;class&quot;</span>, index)</span><br><span class="line">        nowTrain_X = np.array([i[:-<span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> train_mnist <span class="keyword">if</span> i[-<span class="number">1</span>] == index])</span><br><span class="line"><span class="comment">#         print(np.shape(nowTrain_X))</span></span><br><span class="line">        nowTrain_Y = [index] * <span class="built_in">len</span>(nowTrain_X)</span><br><span class="line">        nowGMM = GMM(nowTrain_X, nowTrain_Y, number)</span><br><span class="line">        nowGMM.Train()</span><br><span class="line">        alphas.append(nowGMM.alpha)</span><br><span class="line">        mus.append(nowGMM.mu)</span><br><span class="line">        covariances.append(nowGMM.covariance)</span><br><span class="line">        </span><br><span class="line"><span class="comment">#     print(&quot;Test Begin!&quot;)</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>):  </span><br><span class="line">        pdfs.append(Likelihood(test_mnist_X, alphas[i], mus[i], covariances[i], <span class="built_in">len</span>(alphas[i])))</span><br><span class="line">    result = np.argmax(pdfs, axis = <span class="number">0</span>)</span><br><span class="line">    accuracy_num = <span class="built_in">sum</span>(result == test_mnist_Y) </span><br><span class="line">    accuracy = accuracy_num / <span class="built_in">len</span>(result)</span><br><span class="line">    <span class="keyword">return</span> accuracy_num, accuracy</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">6</span>):</span><br><span class="line">    accuracy_num, accuracy = GmmOfMnist(i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;GMM number:&quot;</span>, i)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正确识别数: &quot;</span>, accuracy_num)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;正确识别率: &quot;</span>, accuracy)</span><br></pre></td></tr></table></figure><h2 id="遇到的问题及解决方法">遇到的问题及解决方法</h2><ul><li>高斯均值初始化问题：<br>在前几轮训练中有几次收敛到局部最优解，即有个别高斯模型重叠覆盖了同一个训练样本，或者一个高斯完全覆盖了另一个高斯的样本范围。这是由于初始化不够好导致的，起初选用的是固定选点，后续使用的是随机样本选点，更好的做法应该是使用Kmeans聚类选择初始化点。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;span id=&quot;more&quot;&gt;&lt;/span&gt;
&lt;h2 id=&quot;GMM高斯混合模型原理&quot;&gt;GMM高斯混合模型原理&lt;/h2&gt;
&lt;h3 id=&quot;混合密度模型&quot;&gt;混合密度模型&lt;/h3&gt;
&lt;p&gt;复杂的概率密度函数可以由简单密度函数线性组合构成&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;ka</summary>
      
    
    
    
    <category term="机器学习" scheme="https://escapeey.github.io/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="算法" scheme="https://escapeey.github.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>博客常用操作</title>
    <link href="https://escapeey.github.io/post/83d7c48b.html"/>
    <id>https://escapeey.github.io/post/83d7c48b.html</id>
    <published>2023-10-18T22:07:33.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<p>记录博客常用操作</p><span id="more"></span><h2 id="一键三连-部署">一键三连 + 部署</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo cl</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h2 id="创建博客">创建博客</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new post &quot;博客名&quot;</span><br><span class="line">hexo n &quot;博客名&quot;</span><br></pre></td></tr></table></figure><ul><li>文章标题可以在对应 md 文件里改，新建时标题可以写的简单些；</li><li>文件属性：<br>| - | Setting | Description | Default   |<br>|:-:|:-------:|:-----------:|:---------:|<br>| 1 | layout  |   Layout    | post或page|<br>| 2 | title   |  文章的标题  |             |<br>| 3 | date    |  创建日期    |文件的创建日期|<br>| 4 | updated |  修改日期    |文件的修改日期|<br>| 5 | comments| 是否开启评论 | true |<br>| 6 | tags    | 标签        |   |<br>| 7 |categories| 分类       |   |<br>| 8 | permalink| url中的名字| 文件名|</li></ul><h2 id="刷新缓存">刷新缓存</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo cl</span><br></pre></td></tr></table></figure><ul><li>该命令用于清除缓存文件 <em><strong>db.json</strong></em> 和已生成的静态文件 <em><strong>public</strong></em></li><li>在更换主题后，如果发现站点更改不生效，可以运行该命令;</li><li>网站显示异常时可以执行这条命令试试;</li></ul><h2 id="生成网站静态文件">生成网站静态文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure><ul><li>是 hexo generate 的缩写;</li><li>生成网站静态文件到默认设置的 public 文件夹;</li><li>如果使用自动部署，不需要先执行该命令；</li></ul><h2 id="启动本地服务器">启动本地服务器</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><ul><li>用于预览主题。默认地址： <em><strong><a href="http://localhost:4000/">http://localhost:4000/</a></strong></em> ；</li><li>预览的同时可以在md中修改文章内容或主题代码，保存后刷新页面即可；</li><li>对 <em><strong>_config.yml</strong></em> 的修改，需要重启本地服务器后才能预览效果。</li></ul><h2 id="部署到github">部署到github</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><ul><li>是 <em><strong>hexo deploy</strong></em> 的缩写</li><li>自动生成网站静态文件，并部署到设定的仓库</li></ul><h2 id="草稿">草稿</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new draft &quot;new draft&quot;</span><br></pre></td></tr></table></figure><ul><li>会在source/_drafts目录下生成一个 <em><strong><a href="http://new-draft.md">new-draft.md</a></strong></em>文件。但是这个文件不被显示在页面上，链接也访问不到。也就是说如果你想把某一篇文章移除显示，又不舍得删除，可以把它移动到 <em><strong>_drafts</strong></em> 目录之中。</li><li>下面这条命令可以把草稿变成文章，或者页面：</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo publish [layout] &lt;filename&gt;</span><br></pre></td></tr></table></figure><blockquote><p>以上命令使用基于 Hexo 3.1.1 版本；<br>更多命令用法请查询 <a href="https://hexo.io/zh-cn/docs/commands.html">官方文档</a></p></blockquote>]]></content>
    
    
    <summary type="html">&lt;p&gt;记录博客常用操作&lt;/p&gt;</summary>
    
    
    
    <category term="工具" scheme="https://escapeey.github.io/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="工具" scheme="https://escapeey.github.io/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>创建博客踩坑记录</title>
    <link href="https://escapeey.github.io/post/b93631e0.html"/>
    <id>https://escapeey.github.io/post/b93631e0.html</id>
    <published>2023-10-18T21:11:51.000Z</published>
    <updated>2023-12-25T14:22:46.457Z</updated>
    
    <content type="html"><![CDATA[<p>记录创建博客时的报错</p><span id="more"></span><h2 id="生成SSH密钥保存位置">生成SSH密钥保存位置</h2><ul><li>错误：将 <strong>“.ssh/id_rsa”</strong> 存入D盘下的文件夹中</li><li>解决：应将其存入 <strong>“C/Users/”</strong> 文件夹中</li></ul><h2 id="运行-“ssh-T-git-github-com”-时报错">运行 “<code>ssh -T git@github.com</code>” 时报错</h2><ul><li>错误：Permission denied (publickey). fatal: Could not read from remote repository.</li><li>解决：将得到的密钥添加到github中</li></ul><h2 id="运行-“hexo-init”-初始化hexo时报错">运行 “<code>hexo init</code>” 初始化hexo时报错</h2><ul><li>错误1：三行 Info 中第二行报错：</li><li>解决： 一般是github访问问题，建议使用加速器</li><li>错误2：三行 Info 中第三行报错：<br>Failed to install dependencies. Please run ‘npm install’ manually!。且 执行&quot;npm install&quot;失败</li><li>解决： 这是因为没用使用管理员模式打开 <em><strong>git bash</strong></em> 建议在 修改 <em><strong>git-bash.exe</strong></em> 默认使用管理员启动</li></ul><h2 id="运行-“hexo-d”-时报错">运行 “<code>hexo d</code>” 时报错</h2><ul><li>错误：ERROR Deployer not found: git</li><li>解决：<ul><li>如果没有安装 <em><strong>hexo-deployer-git</strong></em> 插件 先安装</li></ul>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><ul><li>先在github上创建网站库 再尝试</li></ul></li></ul><h2 id="打开创建好的网站时报错404">打开创建好的网站时报错404</h2><ul><li>解决：作者起初使用了与github用户名不同的名字作为库名即网站名，出现404，再修改为与github用户名相同后，且修改 <em><strong>_config.yml</strong></em> 文档相关信息后成功打开</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;记录创建博客时的报错&lt;/p&gt;</summary>
    
    
    
    
    <category term="踩坑" scheme="https://escapeey.github.io/tags/%E8%B8%A9%E5%9D%91/"/>
    
  </entry>
  
</feed>
